/*! CocoonJSExtensions - v2.0.0 - 2014-04-10 www.ludei.com */!function(){CocoonJS=window.CocoonJS?window.CocoonJS:{},CocoonJS.nativeExtensionObjectAvailable="undefined"!=typeof window.ext,CocoonJS.Size={width:0,height:0},CocoonJS.extend=function(a,b){var c=a.prototype,d=function(){};d.prototype=b.prototype,a.prototype=new d,a.superclass=b.prototype,a.prototype.constructor=a,b.prototype.constructor===Object.prototype.constructor&&(b.prototype.constructor=b);for(var e in c)c.hasOwnProperty(e)&&(a.prototype[e]=c[e])},CocoonJS.makeNativeExtensionObjectFunctionCall=function(a,b,c,d){if(CocoonJS.nativeExtensionObjectAvailable){var e=Array.prototype.slice.call(c);e.unshift(b);var f=ext[a],g=d?f.makeCallAsync:f.makeCall,h=g.apply(f,e),i=h;if("string"==typeof h)try{i=JSON.parse(h)}catch(j){}return i}},CocoonJS.getObjectFromPath=function(a,b){for(var c=b.split("."),d=a,e=0,f=c.length;f>e;++e)d[c[e]]=d[c[e]]||void 0,d=d[c[e]];return d},CocoonJS.getKeyForValueInDictionary=function(a,b){var c=null;for(var d in a)if(a[d]===b){c=d;break}return c},CocoonJS.findStringInStringArrayThatIsIndexOf=function(a,b,c){var d=null;b=c?b:b.toUpperCase();for(var e=0;null==d&&e<a.length;e++)d=c?a[e]:a[e].toUpperCase(),d=d.indexOf(b)>=0?a[e]:null;return d},CocoonJS.EventHandler=function(a,b,c,d){return this.listeners=[],this.listenersOnce=[],this.chainFunction=d,this.addEventListener=function(e){if(d){var f=function(){d.call(this,arguments.callee.sourceListener,Array.prototype.slice.call(arguments))};e.CocoonJSEventHandlerChainFunction=f,f.sourceListener=e,e=f}var g=CocoonJS.getObjectFromPath(CocoonJS,b);g&&g.nativeExtensionObjectAvailable&&ext[a].addEventListener(c,e);var h=this.listeners.indexOf(e);0>h&&this.listeners.push(e)},this.addEventListenerOnce=function(e){if(d){var f=function(){d(arguments.callee.sourceListener,Array.prototype.slice.call(arguments))};f.sourceListener=e,e=f}var g=CocoonJS.getObjectFromPath(CocoonJS,b);if(g.nativeExtensionObjectAvailable)ext[a].addEventListenerOnce(c,e);else{var h=this.listeners.indexOf(e);0>h&&this.listenersOnce.push(e)}},this.removeEventListener=function(e){d&&(e=e.CocoonJSEventHandlerChainFunction,delete e.CocoonJSEventHandlerChainFunction);var f=CocoonJS.getObjectFromPath(CocoonJS,b);if(f.nativeExtensionObjectAvailable)ext[a].removeEventListener(c,e);else{var g=this.listeners.indexOf(e);g>=0&&this.listeners.splice(g,1)}},this.notifyEventListeners=function(){var d=CocoonJS.getObjectFromPath(CocoonJS,b),e=Array.prototype.slice.call(arguments);if(d&&d.nativeExtensionObjectAvailable)ext[a].notifyEventListeners(c,e);else{var f=Array.prototype.slice.call(this.listeners),g=Array.prototype.slice.call(this.listenersOnce),h=this;setTimeout(function(){for(var a=0;a<f.length;a++)f[a].apply(h,e);for(var a=0;a<g.length;a++)g[a].apply(h,e)},0),h.listenersOnce=[]}},this},CocoonJS.Timer=function(){return this.reset(),this},CocoonJS.Timer.prototype={currentTimeInMillis:0,lastTimeInMillis:0,elapsedTimeInMillis:0,elapsedTimeInSeconds:0,accumTimeInMillis:0,reset:function(){this.currentTimeInMillis=this.lastTimeInMillis=(new Date).getTime(),this.accumTimeInMillis=this.elapsedTimeInMillis=this.elapsedTimeInSeconds=0},update:function(){this.currentTimeInMillis=(new Date).getTime(),this.elapsedTimeInMillis=this.currentTimeInMillis-this.lastTimeInMillis,this.elapsedTimeInSeconds=this.elapsedTimeInMillis/1e3,this.lastTimeInMillis=this.currentTimeInMillis,this.accumTimeInMillis+=this.elapsedTimeInMillis}}}(),function(){function a(){if("boolean"===CocoonJS.App.forward.nativeAvailable)return CocoonJS.App.forward.nativeAvailable;var a=CocoonJS.makeNativeExtensionObjectFunctionCall("IDTK_APP","forwardAvailable",arguments);return a=!!a,CocoonJS.App.forward.nativeAvailable=a,a}if("undefined"==typeof window.CocoonJS||null===window.CocoonJS)throw"The CocoonJS object must exist and be valid before creating any extension object.";CocoonJS.App=CocoonJS.App?CocoonJS.App:{},CocoonJS.App.nativeExtensionObjectAvailable=CocoonJS.nativeExtensionObjectAvailable&&"undefined"!=typeof window.ext.IDTK_APP,CocoonJS.App.FPSLayout={TOP_LEFT:"top-left",TOP_RIGHT:"top-right",BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right"},CocoonJS.App.Orientations={PORTRAIT:1,PORTRAIT_UPSIDE_DOWN:2,LANDSCAPE_LEFT:4,LANDSCAPE_RIGHT:8,PORTRAIT:3,LANDSCAPE:12,BOTH:15},CocoonJS.App.KeyboardType={TEXT:"text",NUMBER:"num",PHONE:"phone",EMAIL:"email",URL:"url"},CocoonJS.App.StorageType={APP_STORAGE:"APP_STORAGE",INTERNAL_STORAGE:"INTERNAL_STORAGE",EXTERNAL_STORAGE:"EXTERNAL_STORAGE",TEMPORARY_STORAGE:"TEMPORARY_STORAGE"},CocoonJS.App.CaptureType={EVERYTHING:0,JUST_COCOONJS_GL_SURFACE:1,JUST_SYSTEM_VIEWS:2},CocoonJS.App.forward=function(b){return CocoonJS.App.nativeExtensionObjectAvailable&&a()?CocoonJS.makeNativeExtensionObjectFunctionCall("IDTK_APP","forward",arguments):"CocoonJS_App_ForCocoonJS_WebViewIFrame"==window.name?window.parent.eval(b):window.frames.CocoonJS_App_ForCocoonJS_WebViewIFrame.window.eval(b)},CocoonJS.App.forwardAsync=function(b,c){return CocoonJS.App.nativeExtensionObjectAvailable&&a()?"undefined"!=typeof c?ext.IDTK_APP.makeCallAsync("forward",b,c):ext.IDTK_APP.makeCallAsync("forward",b):"CocoonJS_App_ForCocoonJS_WebViewIFrame"==window.name?window.parent.eval(b):window.parent.frames.CocoonJS_App_ForCocoonJS_WebViewIFrame.window.eval(b)},CocoonJS.App.showTextDialog=function(a,b,c){return CocoonJS.App.nativeExtensionObjectAvailable?CocoonJS.makeNativeExtensionObjectFunctionCall("IDTK_APP","showTextDialog",arguments,!0):void(navigator.isCocoonJS||(b||(b=""),c||(c=""),setTimeout(function(){var a=prompt(b,c),d=a?CocoonJS.App.onTextDialogFinished:CocoonJS.App.onTextDialogCancelled;d.notifyEventListeners(a)},0)))},CocoonJS.App.showMessageBox=function(a,b){return CocoonJS.App.nativeExtensionObjectAvailable?CocoonJS.makeNativeExtensionObjectFunctionCall("IDTK_APP","showMessageBox",arguments,!0):void(navigator.isCocoonJS||(b||(b=""),setTimeout(function(){var a=confirm(b),c=a?CocoonJS.App.onMessageBoxConfirmed:CocoonJS.App.onMessageBoxDenied;c.notifyEventListeners()},0)))},CocoonJS.App.load=function(a){if(CocoonJS.App.nativeExtensionObjectAvailable)return CocoonJS.makeNativeExtensionObjectFunctionCall("IDTK_APP","loadPath",arguments);if(!navigator.isCocoonJS){var b=new XMLHttpRequest;b.onreadystatechange=function(){if(4===b.readyState)if(200===b.status){var c;c=CocoonJS.App.EmulatedWebViewIFrame?"window.CocoonJS && window.CocoonJS.App.onLoadInCocoonJSSucceed.notifyEventListeners('"+a+"');":"window.CocoonJS && window.CocoonJS.App.onLoadInTheWebViewSucceed.notifyEventListeners('"+a+"');",CocoonJS.App.forwardAsync(c),window.location.href=a}else if(404===b.status){this.onreadystatechange=null;var c;c=CocoonJS.App.EmulatedWebViewIFrame?"CocoonJS && CocoonJS.App.onLoadInCocoonJSFailed.notifyEventListeners('"+a+"');":"CocoonJS && CocoonJS.App.onLoadInTheWebViewFailed.notifyEventListeners('"+a+"');",CocoonJS.App.forwardAsync(c)}},b.open("GET",a,!0),b.send()}},CocoonJS.App.reload=function(){return CocoonJS.App.nativeExtensionObjectAvailable?CocoonJS.makeNativeExtensionObjectFunctionCall("IDTK_APP","reload",arguments):navigator.isCocoonJS?void 0:"CocoonJS_App_ForCocoonJS_WebViewIFrame"==window.name?window.parent.location.reload():window.parent.frames.CocoonJS_App_ForCocoonJS_WebViewIFrame.window.location.reload()},CocoonJS.App.openURL=function(a){return CocoonJS.App.nativeExtensionObjectAvailable?CocoonJS.makeNativeExtensionObjectFunctionCall("IDTK_APP","openURL",arguments,!0):void(navigator.isCocoonJS||window.open(a,"_blank"))},CocoonJS.App.forceToFinish=function(){return CocoonJS.App.nativeExtensionObjectAvailable?CocoonJS.makeNativeExtensionObjectFunctionCall("IDTK_APP","forceToFinish",arguments):void(navigator.isCocoonJS||window.close())},CocoonJS.App.setAutoLockEnabled=function(){return CocoonJS.App.nativeExtensionObjectAvailable?CocoonJS.makeNativeExtensionObjectFunctionCall("IDTK_APP","setAutoLockEnabled",arguments):void 0},CocoonJS.App.createScreenCanvas=function(){var a;return navigator.isCocoonJS?a=document.createElement("screencanvas"):navigator.isCocoonJS||(a=document.createElement("canvas"),a.width=window.innerWidth,a.height=window.innerHeight),a},CocoonJS.App.disableTouchInCocoonJS=function(){CocoonJS.App.nativeExtensionObjectAvailable&&window.ext.IDTK_APP.makeCall("disableTouchLayer","CocoonJSView")},CocoonJS.App.enableTouchInCocoonJS=function(){CocoonJS.App.nativeExtensionObjectAvailable&&window.ext.IDTK_APP.makeCall("enableTouchLayer","CocoonJSView")},CocoonJS.App.disableTouchInTheWebView=function(){CocoonJS.App.nativeExtensionObjectAvailable&&window.ext.IDTK_APP.makeCall("disableTouchLayer","WebView")},CocoonJS.App.enableTouchInTheWebView=function(){CocoonJS.App.nativeExtensionObjectAvailable&&window.ext.IDTK_APP.makeCall("enableTouchLayer","WebView")},CocoonJS.App.setAccelerometerUpdateIntervalInSeconds=function(a){return CocoonJS.App.nativeExtensionObjectAvailable?window.ext.IDTK_APP.makeCall("setAccelerometerUpdateIntervalInSeconds",a):void 0},CocoonJS.App.getAccelerometerUpdateIntervalInSeconds=function(){return CocoonJS.App.nativeExtensionObjectAvailable?window.ext.IDTK_APP.makeCall("getAccelerometerUpdateIntervalInSeconds"):void 0},CocoonJS.App.setGyroscopeUpdateIntervalInSeconds=function(a){return CocoonJS.App.nativeExtensionObjectAvailable?window.ext.IDTK_APP.makeCall("setGyroscopeUpdateIntervalInSeconds",a):void 0},CocoonJS.App.getGyroscopeUpdateIntervalInSeconds=function(){CocoonJS.App.nativeExtensionObjectAvailable&&window.ext.IDTK_APP.makeCall("getGyroscopeUpdateIntervalInSeconds")},CocoonJS.App.setupOriginProxyType=function(a,b,c,d){if(!a)throw"The given typeName must be valid.";if(!b&&!c&&!d)throw"There is no point on setting up a proxy for no attributes, functions nor eventHandlers.";b=b?b:[],c=c?c:[],d=d?d:[];var e=window,f="CocoonJS.App.setupDestinationProxyType("+JSON.stringify(a)+", "+JSON.stringify(d)+");";CocoonJS.App.forward(f);var g=e[a];e[a]=function(){var f=this;this._cocoonjs_proxy_object_data={};var g="CocoonJS.App.newDestinationProxyObject("+JSON.stringify(a)+");";this._cocoonjs_proxy_object_data.id=CocoonJS.App.forward(g),this._cocoonjs_proxy_object_data.eventHandlers={},this._cocoonjs_proxy_object_data.typeName=a,this._cocoonjs_proxy_object_data.eventListeners={},e[a]._cocoonjs_proxy_type_data.proxyObjects[this._cocoonjs_proxy_object_data.id]=this;for(var h=0;h<b.length;h++)!function(b){f.__defineSetter__(b,function(c){var d="CocoonJS.App.setDestinationProxyObjectAttribute("+JSON.stringify(a)+", "+f._cocoonjs_proxy_object_data.id+", "+JSON.stringify(b)+", "+JSON.stringify(c)+");";return CocoonJS.App.forward(d)}),f.__defineGetter__(b,function(){var c="CocoonJS.App.getDestinationProxyObjectAttribute("+JSON.stringify(a)+", "+f._cocoonjs_proxy_object_data.id+", "+JSON.stringify(b)+");";return CocoonJS.App.forward(c)})}(b[h]);for(var h=0;h<c.length;h++)!function(b){f[b]=function(){var c=Array.prototype.slice.call(arguments);c.unshift(b),c.unshift(this._cocoonjs_proxy_object_data.id),c.unshift(a);for(var d="CocoonJS.App.callDestinationProxyObjectFunction(",e=0;e<c.length;e++)d+=(1!==e?JSON.stringify(c[e]):c[e])+(e<c.length-1?", ":"");d+=");";var f=CocoonJS.App.forwardAsync(d);return f}}(c[h]);for(var h=0;h<d.length;h++)!function(a){f.__defineSetter__(a,function(b){f._cocoonjs_proxy_object_data.eventHandlers[a]=b}),f.__defineGetter__(a,function(){return f._cocoonjs_proxy_object_data.eventHandlers[a]})}(d[h]);return f.addEventListener=function(a,b){var c=!0,d=f._cocoonjs_proxy_object_data.eventListeners[a];if(d)c=d.indexOf(b)<0;else{d=[],f._cocoonjs_proxy_object_data.eventListeners[a]=d;var e="CocoonJS.App.addDestinationProxyObjectEventListener("+JSON.stringify(f._cocoonjs_proxy_object_data.typeName)+", "+f._cocoonjs_proxy_object_data.id+", "+JSON.stringify(a)+");";CocoonJS.App.forwardAsync(e)}c&&d.push(b)},f.removeEventListener=function(a,b){var c=f._cocoonjs_proxy_object_data.eventListeners[a];if(c){var d=c.indexOf(b);d>=0&&c.splice(d,1)}},this},e[a]._cocoonjs_proxy_type_data={originalType:g,proxyObjects:[]},e[a]._cocoonjs_proxy_type_data.deleteProxyObject=function(b){var c=CocoonJS.getKeyForValueInDictionary(this.proxyObjects,b);if(c){var d="CocoonJS.App.deleteDestinationProxyObject("+JSON.stringify(a)+", "+b._cocoonjs_proxy_object_data.id+");";CocoonJS.App.forwardAsync(d),b._cocoonjs_proxy_object_data=null,delete this.proxyObjects[c]}},e[a]._cocoonjs_proxy_type_data.callProxyObjectEventHandler=function(a,b){var c=this.proxyObjects[a],d=c._cocoonjs_proxy_object_data.eventHandlers[b];d&&d({target:c})},e[a]._cocoonjs_proxy_type_data.callProxyObjectEventListeners=function(a,b){for(var c=this.proxyObjects[a],d=c._cocoonjs_proxy_object_data.eventListeners[b].slice(),e=0;e<d.length;e++)d[e]({target:c})}},CocoonJS.App.takedownOriginProxyType=function(a){var b=window;b[a]&&b[a]._cocoonjs_proxy_type_data&&(b[a]=b[a]._cocoonjs_proxy_type_data.originalType)},CocoonJS.App.deleteOriginProxyObject=function(a){var b=window;a&&a._cocoonjs_proxy_object_data&&b[a._cocoonjs_proxy_object_data.typeName]._cocoonjs_proxy_type_data.deleteProxyObject(a)},CocoonJS.App.callOriginProxyObjectEventHandler=function(a,b,c){var d=window;d[a]._cocoonjs_proxy_type_data.callProxyObjectEventHandler(b,c)},CocoonJS.App.callOriginProxyObjectEventListeners=function(a,b,c){var d=window;d[a]._cocoonjs_proxy_type_data.callProxyObjectEventListeners(b,c)},CocoonJS.App.setupDestinationProxyType=function(a,b){var c=window;c[a]._cocoonjs_proxy_type_data={nextId:0,proxyObjects:{},eventHandlerNames:b}},CocoonJS.App.takedownDestinationProxyType=function(a){var b=window;parent[a]&&b[a]._cocoonjs_proxy_type_data&&delete b[a]._cocoonjs_proxy_type_data},CocoonJS.App.newDestinationProxyObject=function(a){var b=window,c=new b[a];c._cocoonjs_proxy_object_data={},c._cocoonjs_proxy_object_data.typeName=a;var d=b[a]._cocoonjs_proxy_type_data.nextId;b[a]._cocoonjs_proxy_type_data.proxyObjects[d]=c,c._cocoonjs_proxy_object_data.id=d,b[a]._cocoonjs_proxy_type_data.nextId++;for(var e=0;e<b[a]._cocoonjs_proxy_type_data.eventHandlerNames.length;e++)!function(a){c[a]=function(){var b=this,c="CocoonJS.App.callOriginProxyObjectEventHandler("+JSON.stringify(b._cocoonjs_proxy_object_data.typeName)+", "+b._cocoonjs_proxy_object_data.id+", "+JSON.stringify(a)+");";CocoonJS.App.forwardAsync(c)}}(b[a]._cocoonjs_proxy_type_data.eventHandlerNames[e]);return c._cocoonjs_proxy_object_data.eventListeners={},d},CocoonJS.App.callDestinationProxyObjectFunction=function(a,b,c){var d=window,e=Array.prototype.slice.call(arguments);e.splice(0,3);var f=d[a]._cocoonjs_proxy_type_data.proxyObjects[b],g=f[c].apply(f,e);return g},CocoonJS.App.setDestinationProxyObjectAttribute=function(a,b,c,d){var e=window,f=e[a]._cocoonjs_proxy_type_data.proxyObjects[b];f[c]=d},CocoonJS.App.getDestinationProxyObjectAttribute=function(a,b,c){var d=window,e=d[a]._cocoonjs_proxy_type_data.proxyObjects[b];return e[c]},CocoonJS.App.deleteDestinationProxyObject=function(a,b){var c=window;delete c[a]._cocoonjs_proxy_type_data.proxyObjects[b]},CocoonJS.App.addDestinationProxyObjectEventListener=function(a,b,c){var d=window,e=d[a]._cocoonjs_proxy_type_data.proxyObjects[b],f=function(){var a=this,b="CocoonJS.App.callOriginProxyObjectEventListeners("+JSON.stringify(a._cocoonjs_proxy_object_data.typeName)+", "+a._cocoonjs_proxy_object_data.id+", "+JSON.stringify(c)+");";CocoonJS.App.forwardAsync(b)};e._cocoonjs_proxy_object_data.eventListeners[c]=f,e.addEventListener(c,f)},CocoonJS.App.proxifyXHR=function(){var a=["timeout","withCredentials","upload","status","statusText","responseType","response","responseText","responseXML","readyState"],b=["open","setRequestHeader","send","abort","getResponseHeader","getAllResponseHeaders","overrideMimeType"],c=["onloadstart","onprogress","onabort","onerror","onload","ontimeout","onloadend","onreadystatechange"];CocoonJS.App.setupOriginProxyType("XMLHttpRequest",a,b,c)},CocoonJS.App.proxifyAudio=function(){var a=["src","loop","volume","preload"],b=["play","pause","load","canPlayType"],c=["onended","oncanplay","oncanplaythrough","onerror"];CocoonJS.App.setupOriginProxyType("Audio",a,b,c)},CocoonJS.App.captureScreen=function(a,b,c){return CocoonJS.App.nativeExtensionObjectAvailable?window.ext.IDTK_APP.makeCall("captureScreen",a,b,c):void 0},CocoonJS.App.captureScreenAsync=function(a,b,c,d){CocoonJS.App.nativeExtensionObjectAvailable&&window.ext.IDTK_APP.makeCallAsync("captureScreen",a,b,c,d)},CocoonJS.App.getDeviceId=function(){return CocoonJS.App.nativeExtensionObjectAvailable?window.ext.IDTK_APP.makeCall("getDeviceId"):void 0},CocoonJS.App.DeviceInfo={os:null,version:null,dpi:null,brand:null,model:null,imei:null,platformId:null,odin:null,openudid:null},CocoonJS.App.getDeviceInfo=function(){return CocoonJS.App.nativeExtensionObjectAvailable?window.ext.IDTK_APP.makeCall("getDeviceInfo"):void 0},CocoonJS.App.WebDialog=function(){if(CocoonJS.App.nativeExtensionObjectAvailable)this.webDialogID=window.ext.IDTK_APP.makeCall("createWebDialog");else{var a=document.createElement("iframe");a.id="CocoonJSWebDialogIFrame",a.name="CocoonJSWebDialogIFrame",a.style.cssText="position:fixed;left:0;top:0;bottom:0;right:0; width:100%; height:100%;margin:0;padding:0;";var b=this;a.onload=function(){b.iframeloaded=!0;var a="CocoonJS = {}; CocoonJS.WebDialog = {}; CocoonJS.WebDialog.close = function(){   window.parent.CocoonJSCloseWebDialog();};";b.evalIframe(a);for(var c=0;c<b.pendingEvals.length;++c)b.evalIframe(b.pendingEvals[c]);b.pendingEvals=[]},a.onerror=function(){b.close()},this.iframe=a,this.pendingEvals=[],window.CocoonJSCloseWebDialog=function(){b.close()}}},CocoonJS.App.WebDialog.prototype={show:function(a,b){return this.closeCallback=function(){CocoonJS.App.enableTouchInCocoonJS(),b&&b()},CocoonJS.App.nativeExtensionObjectAvailable?(CocoonJS.App.disableTouchInCocoonJS(),window.ext.IDTK_APP.makeCallAsync("showWebDialog",this.webDialogID,a,this.closeCallback)):(this.iframe.src=a,void document.body.appendChild(this.iframe))},close:function(){return CocoonJS.App.nativeExtensionObjectAvailable?window.ext.IDTK_APP.makeCallAsync("closeWebDialog",this.webDialogID):(this.iframe.parentNode&&this.iframe.parentNode.removeChild(this.iframe),void(this.closeCallback&&this.closeCallback()))},evalIframe:function(a){window.frames.CocoonJSWebDialogIFrame.eval(a)},eval:function(a){return CocoonJS.App.nativeExtensionObjectAvailable?window.ext.IDTK_APP.makeCallAsync("evalWebDialog",this.webDialogID,a):void(this.iframeloaded?this.evalIframe(a):this.pendingEvals.push(a))}},CocoonJS.App.getPreferredOrientation=function(){return CocoonJS.App.nativeExtensionObjectAvailable?window.ext.IDTK_APP.makeCall("getPreferredOrientation"):0},CocoonJS.App.setPreferredOrientation=function(a){CocoonJS.App.nativeExtensionObjectAvailable&&window.ext.IDTK_APP.makeCall("setPreferredOrientation",a)},CocoonJS.App.onTextDialogFinished=new CocoonJS.EventHandler("IDTK_APP","App","ontextdialogfinish"),CocoonJS.App.onTextDialogCancelled=new CocoonJS.EventHandler("IDTK_APP","App","ontextdialogcancel"),CocoonJS.App.onMessageBoxConfirmed=new CocoonJS.EventHandler("IDTK_APP","App","onmessageboxconfirmed"),CocoonJS.App.onMessageBoxDenied=new CocoonJS.EventHandler("IDTK_APP","App","onmessageboxdenied"),CocoonJS.App.onSuspended=new CocoonJS.EventHandler("IDTK_APP","App","onsuspended"),CocoonJS.App.onActivated=new CocoonJS.EventHandler("IDTK_APP","App","onactivated")}(),function(){function a(){var a=CocoonJS.App.EmulatedWebView;if(!a){a=document.createElement("div"),a.setAttribute("id","CocoonJS_App_ForCocoonJS_WebViewDiv"),a.style.width=0,a.style.height=0,a.style.position="absolute",a.style.left=0,a.style.top=0,a.style.backgroundColor="transparent",a.style.border="0px solid #000";var b=document.createElement("IFRAME");b.setAttribute("id","CocoonJS_App_ForCocoonJS_WebViewIFrame"),b.setAttribute("name","CocoonJS_App_ForCocoonJS_WebViewIFrame"),b.style.width=0,b.style.height=0,b.frameBorder=0,b.allowtransparency=!0,a.appendChild(b),CocoonJS.App.EmulatedWebView=a,CocoonJS.App.EmulatedWebViewIFrame=b,document.body||(document.body=document.createElement("body")),document.body.appendChild(CocoonJS.App.EmulatedWebView)}}if("undefined"==typeof window.CocoonJS||null===window.CocoonJS)throw"The CocoonJS object must exist and be valid before adding more functionalities to an extension.";if("undefined"==typeof window.CocoonJS.App||null===window.CocoonJS.App)throw"The CocoonJS.App object must exist and be valid before adding more functionalities to it.";CocoonJS.App=CocoonJS.App?CocoonJS.App:{},CocoonJS.App.onLoadInTheWebViewSucceed=new CocoonJS.EventHandler("IDTK_APP","App","forwardpageload"),CocoonJS.App.onLoadInTheWebViewFailed=new CocoonJS.EventHandler("IDTK_APP","App","forwardpagefail"),CocoonJS.App.pause=function(){return CocoonJS.App.nativeExtensionObjectAvailable?CocoonJS.makeNativeExtensionObjectFunctionCall("IDTK_APP","pause",arguments):void 0},CocoonJS.App.resume=function(){return CocoonJS.App.nativeExtensionObjectAvailable?CocoonJS.makeNativeExtensionObjectFunctionCall("IDTK_APP","resume",arguments):void 0},CocoonJS.App.loadInTheWebView=function(b){if(navigator.isCocoonJS&&CocoonJS.App.nativeExtensionObjectAvailable)CocoonJS.makeNativeExtensionObjectFunctionCall("IDTK_APP","loadInTheWebView",arguments);else{var c=new XMLHttpRequest;c.onreadystatechange=function(){if(4===c.readyState)if(200===c.status){a();var d=function(){CocoonJS.App.onLoadInTheWebViewSucceed.notifyEventListeners(b),CocoonJS.App.EmulatedWebViewIFrame.removeEventListener("load",d)};CocoonJS.App.EmulatedWebViewIFrame.addEventListener("load",d),CocoonJS.App.EmulatedWebViewIFrame.contentWindow.location.href=b}else 404===c.status&&(this.onreadystatechange=null,CocoonJS.App.onLoadInTheWebViewFailed.notifyEventListeners(b))},c.open("GET",b,!0),c.send()}},CocoonJS.App.reloadWebView=function(){CocoonJS.App.nativeExtensionObjectAvailable&&navigator.isCocoonJS?CocoonJS.makeNativeExtensionObjectFunctionCall("IDTK_APP","reloadWebView",arguments):(a(),CocoonJS.App.EmulatedWebViewIFrame.contentWindow.location.reload())},CocoonJS.App.showTheWebView=function(b,c,d,e){CocoonJS.App.nativeExtensionObjectAvailable&&navigator.isCocoonJS?CocoonJS.makeNativeExtensionObjectFunctionCall("IDTK_APP","showTheWebView",arguments):(a(),CocoonJS.App.EmulatedWebViewIFrame.style.width=(d?d/window.devicePixelRatio:window.innerWidth)+"px",CocoonJS.App.EmulatedWebViewIFrame.style.height=(e?e/window.devicePixelRatio:window.innerHeight)+"px",CocoonJS.App.EmulatedWebView.style.left=(b?b:0)+"px",CocoonJS.App.EmulatedWebView.style.top=(c?c:0)+"px",CocoonJS.App.EmulatedWebView.style.width=(d?d/window.devicePixelRatio:window.innerWidth)+"px",CocoonJS.App.EmulatedWebView.style.height=(e?e/window.devicePixelRatio:window.innerHeight)+"px",CocoonJS.App.EmulatedWebView.style.display="block",console.log(CocoonJS.App.EmulatedWebViewIFrame.style.cssText))},CocoonJS.App.hideTheWebView=function(){if(CocoonJS.App.nativeExtensionObjectAvailable){var b="ext.IDTK_APP.makeCall('hide');";return CocoonJS.App.forwardAsync(b)}navigator.isCocoonJS||(a(),CocoonJS.App.EmulatedWebView.style.display="none")},CocoonJS.App.markAsMusic=function(){return CocoonJS.App.nativeExtensionObjectAvailable?CocoonJS.makeNativeExtensionObjectFunctionCall("IDTK_APP","addForceMusic",arguments):void 0},CocoonJS.App.setAntialias=function(){return CocoonJS.App.nativeExtensionObjectAvailable?CocoonJS.makeNativeExtensionObjectFunctionCall("IDTK_APP","setDefaultAntialias",arguments):void 0},CocoonJS.App.setAppShouldFinishCallback=function(a){navigator.isCocoonJS&&(window.onidtkappfinish=a)},CocoonJS.App.setTextureReduction=function(){CocoonJS.App.nativeExtensionObjectAvailable&&CocoonJS.makeNativeExtensionObjectFunctionCall("IDTK_APP","setDefaultTextureReducerThreshold",arguments)},CocoonJS.App.logMemoryInfo=function(){return CocoonJS.App.nativeExtensionObjectAvailable?CocoonJS.makeNativeExtensionObjectFunctionCall("IDTK_APP","logMemoryInfo",arguments):void 0},CocoonJS.App.enableFPSInTheWebView=function(a,b){if(!CocoonJS.App.fpsInTheWebViewEnabled){a=a?a:CocoonJS.App.FPSLayout.TOP_RIGHT,b=b?b:"white";var c="(function(){var COCOONJS_WEBVIEW_EXTENSION_SCRIPT_FILES = ['js/CocoonJSExtensions/CocoonJS.js', 'js/CocoonJSExtensions/CocoonJS_App.js', 'js/CocoonJSExtensions/CocoonJS_App_ForWebView.js'];var loadedScriptCounter = 0;var loadedScriptFunction = function() { loadedScriptCounter++;if (loadedScriptCounter >= COCOONJS_WEBVIEW_EXTENSION_SCRIPT_FILES.length){CocoonJS.App.enableFPS("+JSON.stringify(a)+", "+JSON.stringify(b)+");}};for (var i = 0; i < COCOONJS_WEBVIEW_EXTENSION_SCRIPT_FILES.length; i++){var s = document.createElement('script');s.onload = loadedScriptFunction;s.src = COCOONJS_WEBVIEW_EXTENSION_SCRIPT_FILES[i];document.body.appendChild(s);}})();";setTimeout(function(){CocoonJS.App.forward(c)},3e3),CocoonJS.App.fpsInTheWebViewEnabled=!0}},CocoonJS.App.disableFPSInTheWebView=function(){}}(),function(){if("undefined"==typeof window.CocoonJS||null===window.CocoonJS)throw"The CocoonJS object must exist and be valid before adding more functionalities to an extension.";if("undefined"==typeof window.CocoonJS.App||null===window.CocoonJS.App)throw"The CocoonJS.App object must exist and be valid before adding more functionalities to it.";navigator.isCocoonJS||(CocoonJS.App=CocoonJS.App?CocoonJS.App:{},CocoonJS.App.nativeExtensionObjectAvailable=CocoonJS.App.nativeExtensionObjectAvailable,CocoonJS.App.show=function(a,b,c,d){if(CocoonJS.App.nativeExtensionObjectAvailable)return CocoonJS.makeNativeExtensionObjectFunctionCall("IDTK_APP","show",arguments);var e=window.parent.document.getElementById("CocoonJS_App_ForCocoonJS_WebViewDiv");e.style.left=(a?a:e.style.left)+"px",e.style.top=(b?b:e.style.top)+"px",e.style.width=(c?c/window.devicePixelRatio:window.parent.innerWidth)+"px",e.style.height=(d?d/window.devicePixelRatio:window.parent.innerHeight)+"px",e.style.display="block";var f=window.parent.document.getElementById("CocoonJS_App_ForCocoonJS_WebViewIFrame");f.style.width=(c?c/window.devicePixelRatio:window.parent.innerWidth)+"px",f.style.height=(d?d/window.devicePixelRatio:window.parent.innerHeight)+"px"},CocoonJS.App.hide=function(){return CocoonJS.App.nativeExtensionObjectAvailable?CocoonJS.makeNativeExtensionObjectFunctionCall("IDTK_APP","hide",arguments):void(window.parent.document.getElementById("CocoonJS_App_ForCocoonJS_WebViewDiv").style.display="none")},CocoonJS.App.loadInCocoonJS=function(a,b){if(CocoonJS.App.nativeExtensionObjectAvailable){var c="ext.IDTK_APP.makeCall('loadPath'";return"undefined"!=typeof a&&(c+=", '"+a+"'","undefined"!=typeof b&&(c+=", '"+b+"'")),c+=");",CocoonJS.App.forwardAsync(c)}CocoonJS.App.forwardAsync("CocoonJS.App.load('"+a+"');")},CocoonJS.App.reloadCocoonJS=function(){return CocoonJS.App.nativeExtensionObjectAvailable?CocoonJS.App.forwardAsync("ext.IDTK_APP.makeCall('reload');"):void(navigator.isCocoonJS||window.parent.location.reload())},CocoonJS.App.proxifyConsole=function(){if(CocoonJS.nativeExtensionObjectAvailable){"undefined"==typeof CocoonJS.App.originalConsole&&(CocoonJS.App.originalConsole=window.console);for(var a=["log","error","info","debug","warn"],b={},c=0;c<a.length;c++)b[a[c]]=function(a){return function(b){var c="console."+a+"("+JSON.stringify(b)+");";CocoonJS.App.originalConsole.log(c),ext.IDTK_APP.makeCallAsync("forward",c)}}(a[c]);b.assert||(b.assert=function(){if(arguments.length>0&&!arguments[0]){var a="Assertion failed: "+(arguments.length>1?arguments[1]:"");b.error(a)}}),window.console=b}},CocoonJS.App.deproxifyConsole=function(){!window.navigator.isCocoonJS&&CocoonJS.nativeExtensionObjectAvailable&&"undefined"!=typeof CocoonJS.App.originalConsole&&(window.console=CocoonJS.App.originalConsole,CocoonJS.App.originalConsole=void 0)},window.addEventListener("load",function(){CocoonJS.App.proxifyConsole()}),CocoonJS.App.onLoadInCocoonJSSucceed=new CocoonJS.EventHandler("IDTK_APP","App","forwardpageload"),CocoonJS.App.onLoadInCocoonJSFailed=new CocoonJS.EventHandler("IDTK_APP","App","forwardpagefail"))}(),function(){if("undefined"==typeof window.CocoonJS||null===window.CocoonJS)throw"The CocoonJS object must exist and be valid before creating any extension object.";CocoonJS.Ad={},CocoonJS.Ad.nativeExtensionObjectAvailable=CocoonJS.nativeExtensionObjectAvailable&&"undefined"!=typeof window.ext.IDTK_SRV_AD,CocoonJS.Ad.BannerLayout={TOP_CENTER:"TOP_CENTER",BOTTOM_CENTER:"BOTTOM_CENTER"},CocoonJS.Ad.Rectangle=function(a,b,c,d){this.x=a,this.y=b,this.width=c,this.height=d},CocoonJS.Ad.Banner=function(a){if("number"!=typeof a)throw"The given ad ID is not a number.";this.id=a;var b=this;this.onBannerShown=new CocoonJS.EventHandler("IDTK_SRV_AD","Ad","onbannershow",function(a,c){b.id===c[0]&&a()}),this.onBannerHidden=new CocoonJS.EventHandler("IDTK_SRV_AD","Ad","onbannerhide",function(a,c){b.id===c[0]&&a()}),this.onBannerReady=new CocoonJS.EventHandler("IDTK_SRV_AD","Ad","onbannerready",function(a,c){b.id===c[0]&&a(c[1],c[2])})},CocoonJS.Ad.Banner.prototype={showBanner:function(){CocoonJS.Ad.nativeExtensionObjectAvailable&&CocoonJS.makeNativeExtensionObjectFunctionCall("IDTK_SRV_AD","showBanner",[this.id],!0)},hideBanner:function(){CocoonJS.Ad.nativeExtensionObjectAvailable&&CocoonJS.makeNativeExtensionObjectFunctionCall("IDTK_SRV_AD","hideBanner",[this.id],!0)},refreshBanner:function(){CocoonJS.Ad.nativeExtensionObjectAvailable&&CocoonJS.makeNativeExtensionObjectFunctionCall("IDTK_SRV_AD","refreshBanner",[this.id],!0)},getRectangle:function(){return CocoonJS.Ad.nativeExtensionObjectAvailable?CocoonJS.makeNativeExtensionObjectFunctionCall("IDTK_SRV_AD","getRectangle",[this.id]):void 0},setRectangle:function(a){CocoonJS.Ad.nativeExtensionObjectAvailable&&CocoonJS.makeNativeExtensionObjectFunctionCall("IDTK_SRV_AD","setRectangle",[this.id,a],!0)},setBannerLayout:function(a){CocoonJS.Ad.nativeExtensionObjectAvailable&&CocoonJS.makeNativeExtensionObjectFunctionCall("IDTK_SRV_AD","setBannerLayout",[this.id,a],!0)}},CocoonJS.Ad.Fullscreen=function(a){if("number"!=typeof a)throw"The given ad ID is not a number.";this.id=a;var b=this;this.onFullScreenShown=new CocoonJS.EventHandler("IDTK_SRV_AD","Ad","onfullscreenshow",function(a,c){b.id===c[0]&&a()}),this.onFullScreenHidden=new CocoonJS.EventHandler("IDTK_SRV_AD","Ad","onfullscreenhide",function(a,c){b.id===c[0]&&a()}),this.onFullScreenReady=new CocoonJS.EventHandler("IDTK_SRV_AD","Ad","onfullscreenready",function(a,c){b.id===c[0]&&a()})},CocoonJS.Ad.Fullscreen.prototype={showFullScreen:function(){return CocoonJS.Ad.nativeExtensionObjectAvailable?CocoonJS.makeNativeExtensionObjectFunctionCall("IDTK_SRV_AD","showFullScreen",[this.id],!0):void 0},refreshFullScreen:function(){return CocoonJS.Ad.nativeExtensionObjectAvailable?CocoonJS.makeNativeExtensionObjectFunctionCall("IDTK_SRV_AD","refreshFullScreen",[this.id],!0):void 0}},CocoonJS.Ad.requestInitialization=function(a){return"undefined"==typeof a&&(a={}),CocoonJS.Ad.nativeExtensionObjectAvailable?CocoonJS.makeNativeExtensionObjectFunctionCall("IDTK_SRV_AD","requestInitialization",arguments,!0):void 0},CocoonJS.Ad.createBanner=function(a){if("undefined"==typeof a&&(a={}),CocoonJS.Ad.nativeExtensionObjectAvailable){var b=CocoonJS.makeNativeExtensionObjectFunctionCall("IDTK_SRV_AD","createBanner",[a]),c=new CocoonJS.Ad.Banner(b);return c}},CocoonJS.Ad.releaseBanner=function(a){if("undefined"==typeof a)throw"The banner ad object to be released is undefined";CocoonJS.Ad.nativeExtensionObjectAvailable&&CocoonJS.makeNativeExtensionObjectFunctionCall("IDTK_SRV_AD","releaseBanner",[a.id])},CocoonJS.Ad.createFullscreen=function(a){if("undefined"==typeof a&&(a={}),CocoonJS.Ad.nativeExtensionObjectAvailable){var b=CocoonJS.makeNativeExtensionObjectFunctionCall("IDTK_SRV_AD","createFullscreen",[a]),c=new CocoonJS.Ad.Fullscreen(b);return c}},CocoonJS.Ad.releaseFullscreen=function(a){if("undefined"==typeof a)throw"The fullscreen ad object to be released is undefined";CocoonJS.Ad.nativeExtensionObjectAvailable&&CocoonJS.makeNativeExtensionObjectFunctionCall("IDTK_SRV_AD","releaseFullscreen",[a.id])},CocoonJS.Ad.showBanner=function(){return CocoonJS.Ad.nativeExtensionObjectAvailable?CocoonJS.makeNativeExtensionObjectFunctionCall("IDTK_SRV_AD","showBanner",arguments,!0):void 0
},CocoonJS.Ad.hideBanner=function(){return CocoonJS.Ad.nativeExtensionObjectAvailable?CocoonJS.makeNativeExtensionObjectFunctionCall("IDTK_SRV_AD","hideBanner",arguments,!0):void 0},CocoonJS.Ad.refreshBanner=function(){return CocoonJS.Ad.nativeExtensionObjectAvailable?CocoonJS.makeNativeExtensionObjectFunctionCall("IDTK_SRV_AD","refreshBanner",arguments,!0):void 0},CocoonJS.Ad.showFullScreen=function(){return CocoonJS.Ad.nativeExtensionObjectAvailable?CocoonJS.makeNativeExtensionObjectFunctionCall("IDTK_SRV_AD","showFullScreen",arguments,!0):void 0},CocoonJS.Ad.refreshFullScreen=function(){return CocoonJS.Ad.nativeExtensionObjectAvailable?CocoonJS.makeNativeExtensionObjectFunctionCall("IDTK_SRV_AD","refreshFullScreen",arguments,!0):void 0},CocoonJS.Ad.preloadBanner=function(){return CocoonJS.Ad.nativeExtensionObjectAvailable?CocoonJS.makeNativeExtensionObjectFunctionCall("IDTK_SRV_AD","preloadBanner",arguments,!0):void 0},CocoonJS.Ad.preloadFullScreen=function(){return CocoonJS.Ad.nativeExtensionObjectAvailable?CocoonJS.makeNativeExtensionObjectFunctionCall("IDTK_SRV_AD","preloadFullScreen",arguments,!0):void 0},CocoonJS.Ad.setRectangle=function(){return CocoonJS.Ad.nativeExtensionObjectAvailable?CocoonJS.makeNativeExtensionObjectFunctionCall("IDTK_SRV_AD","setRectangle",arguments,!0):void 0},CocoonJS.Ad.getRectangle=function(){return CocoonJS.Ad.nativeExtensionObjectAvailable?CocoonJS.makeNativeExtensionObjectFunctionCall("IDTK_SRV_AD","getRectangle",arguments):void 0},CocoonJS.Ad.setBannerLayout=function(){return CocoonJS.Ad.nativeExtensionObjectAvailable?CocoonJS.makeNativeExtensionObjectFunctionCall("IDTK_SRV_AD","setBannerLayout",arguments,!0):void 0},CocoonJS.Ad.onBannerShown=new CocoonJS.EventHandler("IDTK_SRV_AD","Ad","onbannershow"),CocoonJS.Ad.onBannerHidden=new CocoonJS.EventHandler("IDTK_SRV_AD","Ad","onbannerhide"),CocoonJS.Ad.onBannerReady=new CocoonJS.EventHandler("IDTK_SRV_AD","Ad","onbannerready"),CocoonJS.Ad.onFullScreenShown=new CocoonJS.EventHandler("IDTK_SRV_AD","Ad","onfullscreenshow"),CocoonJS.Ad.onFullScreenHidden=new CocoonJS.EventHandler("IDTK_SRV_AD","Ad","onfullscreenhide"),CocoonJS.Ad.onFullScreenReady=new CocoonJS.EventHandler("IDTK_SRV_AD","Ad","onfullscreenready")}(),function(){if("undefined"==typeof window.CocoonJS||null===window.CocoonJS)throw"The CocoonJS object must exist and be valid before creating any extension object.";CocoonJS.Social={},CocoonJS.Social.SocialService=function(){return this.onLoginStatusChanged=new CocoonJS.EventHandler("","dummy","onLoginStatusChanged"),this},CocoonJS.Social.SocialService.prototype={isLoggedIn:function(){return!1},login:function(a){a&&a(!1,{message:"Not implemented!"})},logout:function(a){a&&a({message:"Not implemented!"})},getLoggedInUser:function(){return null},hasPublishPermissions:function(a){a(!0)},requestPublishPermissions:function(a){a&&a(!0,null)},requestUser:function(a){a(null,{message:"Not implemented!"})},requestUserImage:function(a){a("",{message:"Not implemented!"})},requestFriends:function(a){a([],{message:"Not implemented!"})},publishMessage:function(a,b){b({message:"Not implemented!"})},publishMessageWithDialog:function(a,b){b({message:"Not implemented!"})}},CocoonJS.Social.SocialGamingService=function(){return CocoonJS.Social.SocialGamingService.superclass.constructor.call(this),this},CocoonJS.Social.SocialGamingService.prototype={_cachedAchievements:null,_achievementsMap:null,_leaderboardsTemplate:null,_achievementsTemplate:null,requestScore:function(a){a(null,{message:"Not implemented!"})},submitScore:function(a,b){b&&b({message:"Not implemented!"})},showLeaderboard:function(a){a&&a({message:"Not implemented!"})},requestAllAchievements:function(a){a([],{message:"Not implemented!"})},requestAchievements:function(a){a([],{message:"Not implemented!"})},submitAchievement:function(a,b){b&&b({message:"Not implemented!"})},resetAchievements:function(a){a&&a([],{message:"Not implemented!"})},showAchievements:function(a){if(!this._achievementsTemplate)throw"Please, provide a html template for achievements with the setTemplates method";var b=new CocoonJS.App.WebDialog,c=!1;b.show(this._achievementsTemplate,function(d){b.closed=!0,!c&&a&&a(d)});var d=this;this.requestAchievements(function(e,f){if(!b.closed){if(f)return c=!0,void(a&&a(f));var g=[];if(d._cachedAchievements)for(var h=0;h<d._cachedAchievements.length;++h){var i=d._cachedAchievements[h];if(g.push(i),e&&e.length)for(var j=0;j<e.length;++j)if(e[j].achievementID===i.achievementID){i.achieved=!0;break}}var k="addAchievements("+JSON.stringify(g)+");";b.eval(k)}})},setAchievementsMap:function(a){this._achievementsMap=a,this._cachedAchievements&&this.syncAchievementsMap(this._cachedAchievements)},setTemplates:function(a,b){this._leaderboardsTemplate=a,this._achievementsTemplate=b},setCachedAchievements:function(a){this._cachedAchievements=a,a&&this._achievementsMap&&this.syncAchievementsMap(this._cachedAchievements)},findAchievement:function(a){if(!this._cachedAchievements)return null;for(var b=0;b<this._cachedAchievements.length;++b)if(a===this._cachedAchievements[b].achievementID)return this._cachedAchievements[b];return null},translateAchievementID:function(a){if(this._achievementsMap)for(var b in this._achievementsMap)if(b==a)return this._achievementsMap[b];return a},syncAchievementsMap:function(a){if(this._achievementsMap)for(var b=0;b<a.length;++b)for(var c in this._achievementsMap)this._achievementsMap[c]===a[b].achievementID&&(a[b].customID=c)}},CocoonJS.extend(CocoonJS.Social.SocialGamingService,CocoonJS.Social.SocialService),CocoonJS.Social.ImageSize={THUMB:"thumb",SMALL:"small",MEDIUM:"medium",LARGE:"large"},CocoonJS.Social.User=function(a,b,c){return this.userID=a,this.userName=b,this.userImage=c,this},CocoonJS.Social.Message=function(a,b,c,d,e){return this.message=a,this.mediaURL=b,this.linkURL=c,this.linkText=d,this.linkCaption=e,this},CocoonJS.Social.Score=function(a,b,c,d,e){return this.userID=a,this.score=b||0,this.userName=c,this.imageURL=d,this.leaderboardID=e,this},CocoonJS.Social.ScoreParams=function(a,b,c,d){this.userID=a,this.leaderboardID=b,this.friends=!!c,this.timeScope=d||2},CocoonJS.Social.TimeScope={ALL_TIME:0,WEEK:1,TODAY:2},CocoonJS.Social.Achievement=function(a,b,c,d,e){return this.achievementID=a,this.customID=a,this.title=b,this.description=c,this.imageURL=d,this.points=e||0,this}}(),function(){function a(a){return new CocoonJS.Social.User(a.playerID,a.alias)}function b(a){return new CocoonJS.Social.Achievement(a.identifier,a.title,a.achievedDescription,"",a.maximumPoints)}if("undefined"==typeof window.CocoonJS||null===window.CocoonJS)throw"The CocoonJS object must exist and be valid before creating the extension types.";if("undefined"==typeof window.CocoonJS.Social||null===window.CocoonJS.Social)throw"The CocoonJS.Social object must exist and be valid before creating the extension types.";CocoonJS.Social.GameCenterExtension=function(){this.nativeExtensionName="IDTK_SRV_GAMECENTER",this.extensionName="Social.GameCenter",this.nativeExtensionObjectAvailable=CocoonJS.nativeExtensionObjectAvailable&&"undefined"!=typeof window.ext[this.nativeExtensionName];var a=this;return this.nativeExtensionObjectAvailable&&(this.onGameCenterLoginStateChanged=new CocoonJS.EventHandler(this.nativeExtensionName,this.extensionName,"onGameCenterLoginStateChanged"),this.onGameCenterLoginStateChanged.addEventListener(function(b){a._currentPlayer=b})),this},CocoonJS.Social.GameCenterExtension.prototype={_currentPlayer:null,getSocialInterface:function(){return this._socialService||(this._socialService=new CocoonJS.Social.SocialGamingServiceGameCenter(this)),this._socialService},getMultiplayerInterface:function(){return CocoonJS.Multiplayer.GameCenter},isLoggedIn:function(){return this._currentPlayer&&this._currentPlayer.isAuthenticated},login:function(a){var b=this;if(!this.nativeExtensionObjectAvailable)throw"Game Center not available";CocoonJS.makeNativeExtensionObjectFunctionCall(this.nativeExtensionName,"login",[function(c,d){b._currentPlayer=c,a&&a(c,d)}],!0)},getLocalPlayer:function(){if(this._currentPlayer)return this._currentPlayer;if(this.nativeExtensionObjectAvailable)return this._currentPlayer=CocoonJS.makeNativeExtensionObjectFunctionCall(this.nativeExtensionName,"getLocalPlayer",[]),this._currentPlayer;throw"Game Center not available"},loadPlayers:function(a,b){if(!this.nativeExtensionObjectAvailable)throw"Game Center not available";CocoonJS.makeNativeExtensionObjectFunctionCall(this.nativeExtensionName,"loadPlayers",[a,b],!0)},loadFriends:function(a){if(!this.nativeExtensionObjectAvailable)throw"Game Center not available";CocoonJS.makeNativeExtensionObjectFunctionCall(this.nativeExtensionName,"loadFriends",[a],!0)},loadAchievements:function(a){if(!this.nativeExtensionObjectAvailable)throw"Game Center not available";CocoonJS.makeNativeExtensionObjectFunctionCall(this.nativeExtensionName,"loadAchievements",[a],!0)},loadAchievementDescriptions:function(a){if(!this.nativeExtensionObjectAvailable)throw"Game Center not available";CocoonJS.makeNativeExtensionObjectFunctionCall(this.nativeExtensionName,"loadAchievementDescriptions",[a],!0)},loadScores:function(a,b){if(!this.nativeExtensionObjectAvailable)throw"Game Center not available";CocoonJS.makeNativeExtensionObjectFunctionCall(this.nativeExtensionName,"loadScores",[b,a],!0)},submitScore:function(a,b){if(!this.nativeExtensionObjectAvailable)throw"Game Center not available";CocoonJS.makeNativeExtensionObjectFunctionCall(this.nativeExtensionName,"submitScore",[a,b],!0)},submitAchievements:function(a,b){if(!this.nativeExtensionObjectAvailable)throw"Game Center not available";CocoonJS.makeNativeExtensionObjectFunctionCall(this.nativeExtensionName,"submitAchievements",[a,b],!0)},resetAchievements:function(a){if(!this.nativeExtensionObjectAvailable)throw"Game Center not available";CocoonJS.makeNativeExtensionObjectFunctionCall(this.nativeExtensionName,"resetAchievements",[a],!0)},showAchievements:function(a){if(!this.nativeExtensionObjectAvailable)throw"Game Center not available";CocoonJS.makeNativeExtensionObjectFunctionCall(this.nativeExtensionName,"showAchievements",[a],!0)},showLeaderboards:function(a,b){if(!this.nativeExtensionObjectAvailable)throw"Game Center not available";CocoonJS.makeNativeExtensionObjectFunctionCall(this.nativeExtensionName,"showLeaderboards",[b,a],!0)}},CocoonJS.Social.GameCenter=new CocoonJS.Social.GameCenterExtension,CocoonJS.Social.GameCenter.Player=function(){this.playerID="",this.alias="",this.isFriend=!1},CocoonJS.Social.GameCenter.LocalPlayer=function(){this.playerID="",this.alias="",this.isAuthenticated=!1},CocoonJS.Social.GameCenter.Achievement=function(a,b){this.identifier=a,this.percentComplete=b,this.lastReportedDate=0},CocoonJS.Social.GameCenter.AchievementDescription=function(){this.identifier="",this.title="",this.achievedDescription="",this.achievedDescription="",this.maximumPoints=0},CocoonJS.Social.GameCenter.Score=function(a,b){this.value=a,this.category=b,this.playerID="",this.rank=0},CocoonJS.Social.GameCenter.Leaderboard=function(a,b,c,d,e,f){this.category=a,this.playerIDs=a,this.timeScope=c,this.playerScope=d,this.rangeStart=e,this.rangeLength=f,this.scores=[],this.localPlayerScore=[],this.localizedTitle=localizedTitle},CocoonJS.Social.GameCenter.TimeScope={TODAY:0,WEEK:1,ALL_TIME:2},CocoonJS.Social.GameCenter.PlayerScope={GLOBAL:0,FRIENDS:1},CocoonJS.Social.SocialGamingServiceGameCenter=function(a){CocoonJS.Social.SocialGamingServiceGameCenter.superclass.constructor.call(this),this.gc=a;var b=this;return this.gc.onGameCenterLoginStateChanged.addEventListener(function(a,c){b.onLoginStatusChanged.notifyEventListeners(a.isAuthenticated,c)}),this},CocoonJS.Social.SocialGamingServiceGameCenter.prototype={_cachedAchievements:null,isLoggedIn:function(){return this.gc.isLoggedIn()},login:function(a){this.gc.login(function(b,c){a&&a(b.isAuthenticated,c)})},logout:function(a){a&&a({message:"User has to logout from the Game Center APP"})},getLoggedInUser:function(){return a(this.gc._currentPlayer?this.gc._currentPlayer:this.gc.getLocalPlayer())},requestUser:function(b,c){if(c)this.gc.loadPlayers([c],function(c,d){var e=c&&c.length?a(c[0]):null;b(e,d)});else{var d=this;setTimeout(function(){b(d.getLoggedInUser())})}},requestFriends:function(b){this.gc.loadFriends(function(c,d){var e=[];if(c&&c.length)for(var f=0;f<c.length;++f)e.push(a(c[f]));b(e,d)})},requestScore:function(a,b){var c={},d=b||{};d.leaderboardID&&(c.category=d.leaderboardID),c.playerIDs=[d.userID||this.getLoggedInUser().userID],this.gc.loadScores(function(b,c){var e=null;d.userID&&b&&b.scores&&b.scores.length?e=b.scores[0]:b&&b.localPlayerScore&&(e=b.localPlayerScore);var f=e?new CocoonJS.Social.Score(e.playerID,e.value,"","",e.category):null;a(f,c)},c)},submitScore:function(a,b,c){var d=c||{};this.gc.submitScore({value:a,category:d.leaderboardID||""},function(a){b&&b(a)})},showLeaderboard:function(a,b){var c=b||{};this.gc.showLeaderboards(function(b){a&&a(b)},{category:c.leaderboardID||""})},prepareAchievements:function(a,c){if(!this._cachedAchievements||a){var d=this;this.gc.loadAchievementDescriptions(function(a,e){if(e)c([],e);else{var f=[];if(a&&a.length)for(var g=0;g<a.length;g++)f.push(b(a[g]));d.setCachedAchievements(f),c(f,null)}})}else c(this._cachedAchievements,null)},requestAllAchievements:function(a){this.prepareAchievements(!0,a)},requestAchievements:function(a){var b=this;this.prepareAchievements(!1,function(c,d){return d?void a([],d):void b.gc.loadAchievements(function(c,d){if(d)a([],c.error);else{var e=[];if(c&&c.length)for(var f=0;f<c.length;f++){var g=b.findAchievement(c[f].identifier);g&&e.push(g)}a(e,null)}})})},submitAchievement:function(a,b){if(null===a||"undefined"==typeof a)throw"No achievementID specified";var c=this.translateAchievementID(a);this.gc.submitAchievements([{identifier:c,percentComplete:100}],b)},resetAchievements:function(a){this.gc.resetAchievements(a)},showAchievements:function(a){this.gc.showAchievements(function(b){a&&a(b)})}},CocoonJS.extend(CocoonJS.Social.SocialGamingServiceGameCenter,CocoonJS.Social.SocialGamingService)}(),function(){function a(a,b){return{access_token:a.access_token,state:a.state,error:b,expires_in:a.expirationDate?a.expirationDate-Date.now():0,player_id:a.playerId}}function b(a){return new CocoonJS.Social.User(a.playerId,a.displayName,a.avatarImageUrl)}function c(a){var b=a.image?a.image.url:"";return b=b.replace(/sz=\d+/g,"sz=100"),new CocoonJS.Social.User(a.id,a.displayName,b)}function d(a){return a===CocoonJS.Social.ImageSize.THUMB?100:a===CocoonJS.Social.ImageSize.MEDIUM?200:a===CocoonJS.Social.ImageSize.LARGE?512:void 0}function e(a){var b=new CocoonJS.Social.Achievement(a.id,a.name,a.description,a.revealedIconUrl,0);return b.gpAchievementData=a,b}function f(a,b){return new CocoonJS.Social.Score(a.player.playerId,a.scoreValue,a.player.displayName,a.player.avatarImageUrl,b)}if(!window.CocoonJS)throw"The CocoonJS object must exist and be valid before creating the extension types.";if(!window.CocoonJS.Social)throw"The CocoonJS.Social object must exist and be valid before creating the extension types.";CocoonJS.Social.GooglePlayGamesExtension=function(){this.nativeExtensionName="IDTK_SRV_GOOGLE_PLAY_GAMES",this.extensionName="Social.GooglePlayGames",this.nativeExtensionObjectAvailable=CocoonJS.nativeExtensionObjectAvailable&&"undefined"!=typeof window.ext[this.nativeExtensionName],this.auth=new CocoonJS.Social.GooglePlayGamesAuthExtension(this),this.client=new CocoonJS.Social.GooglePlayGamesClientExtension(this),this.defaultScopes=["https://www.googleapis.com/auth/games","https://www.googleapis.com/auth/plus.login"],this.gamesAPI="/games/v1",this.plusAPI="/plus/v1",this.onSessionChanged=new CocoonJS.EventHandler(this.nativeExtensionName,this.extensionName,"onSessionChanged"),CocoonJS.Social.GooglePlayGames=this;var b=this;return this.onSessionChanged.addEventListener(function(c,d){b.token=a(c,d),c&&c.access_token&&b.client.request({path:b.gamesAPI+"/players/me",callback:function(a){b.currentPlayer=a}})}),this},CocoonJS.Social.GooglePlayGamesExtension.prototype={token:null,settings:{},socialService:null,currentPlayer:null,initialized:!1,auth:null,client:null,init:function(a){if(!a||"object"!=typeof a)throw"Invalid params argument";if(this.settings=a,this.initialized=!0,this.nativeExtensionObjectAvailable)CocoonJS.makeNativeExtensionObjectFunctionCall(this.nativeExtensionName,"init",[this.settings.clientId],!0);else{var b=this,c=function(){gapi.auth.authorize({immediate:!0,scope:b.defaultScopes,client_id:b.settings.clientId},function(a){b.token=a,a&&a.access_token&&b.onSessionChanged.notifyEventListeners(a)})};if(window.gapi)c();else{window.onGapiLoadCallback=function(){window.setTimeout(c,1)};var d=document.createElement("script");d.src="https://apis.google.com/js/client.js?onload=onGapiLoadCallback",document.getElementsByTagName("head")[0].appendChild(d)}}},getSocialInterface:function(){if(!this.initialized)throw"You must call init() before getting the Social Interface";return this.socialService||(this.socialService=new CocoonJS.Social.SocialGamingServiceGooglePlayGames(this)),this.socialService},getMultiplayerInterface:function(){return CocoonJS.Multiplayer.GooglePlayGames},share:function(){return window.open(this.href,"","menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600"),!1}},CocoonJS.Social.GooglePlayGamesAuthExtension=function(a){return this.extension=a,this},CocoonJS.Social.GooglePlayGamesAuthExtension.prototype={authorize:function(b,c){var d=this;this.extension.nativeExtensionObjectAvailable?CocoonJS.makeNativeExtensionObjectFunctionCall(this.extension.nativeExtensionName,"authorize",[b,function(b,e){d.extension.token=a(b,e),c&&c(d.extension.token)}],!0):gapi.auth.authorize(b,function(a){d.extension.token=a,d.extension.onSessionChanged.notifyEventListeners(a,a?a.error:null),c&&c(a)})},disconnect:function(a){this.extension.nativeExtensionObjectAvailable?CocoonJS.makeNativeExtensionObjectFunctionCall(this.extension.nativeExtensionName,"disconnect",[a],!0):a&&a({error:"Not implemented yet"})},init:function(a){this.extension.nativeExtensionObjectAvailable?a():gapi.auth.init(a)},getToken:function(){return this.extension.nativeExtensionObjectAvailable?this.extension.token:gapi.auth.getToken()},setToken:function(a){this.extension.nativeExtensionObjectAvailable?this.extension.token=a:gapi.auth.setToken(a)}},CocoonJS.Social.GooglePlayGamesClientExtension=function(a){return this.extension=a,this},CocoonJS.Social.GooglePlayGamesClientExtension.prototype={setApiKey:function(a){this.extension.nativeExtensionObjectAvailable?CocoonJS.makeNativeExtensionObjectFunctionCall(this.extension.nativeExtensionName,"setApiKey",[a],!0):gapi.client.setApiKey(a)},request:function(a){if(this.extension.nativeExtensionObjectAvailable){if(a.callback)return CocoonJS.makeNativeExtensionObjectFunctionCall(this.extension.nativeExtensionName,"request",[a,function(b,c){var d=b;c&&(d=b||{},d.error=c),a.callback(d)}],!0),null;var b=this,c={execute:function(c){CocoonJS.makeNativeExtensionObjectFunctionCall(b.extension.nativeExtensionName,"request",[a,function(a,b){var d=a;b&&(d=a||{},d.error=b),c(d)}],!0)}};return c}return gapi.client.request(a)}},CocoonJS.Social.GooglePlayGames=new CocoonJS.Social.GooglePlayGamesExtension,CocoonJS.Social.SocialGamingServiceGooglePlayGames=function(a){CocoonJS.Social.SocialGamingServiceGooglePlayGames.superclass.constructor.call(this),this.gapi=a;var b=this;return this.gapi.onSessionChanged.addEventListener(function(a){var c=a||{};b.onLoginStatusChanged.notifyEventListeners(!!c.access_token,c.error)}),this},CocoonJS.Social.SocialGamingServiceGooglePlayGames.prototype={isLoggedIn:function(){return this.gapi.token&&this.gapi.token.access_token?!0:!1},login:function(a){var b=this;this.gapi.auth.authorize({client_id:this.gapi.settings.clientId,scope:this.gapi.defaultScopes},function(c){a&&a(b.isLoggedIn(),c.error)})},logout:function(a){this.gapi.auth.disconnect(a)},getLoggedInUser:function(){return this.gapi.currentPlayer?fromGPUserToCocoonUser(this.gapi.currentPlayer):null},requestUser:function(a,c){var d=c||"me";this.gapi.client.request({path:this.gapi.gamesAPI+"/players/"+d,callback:function(c){var d=c&&!c.error?b(c):null;a(d,c.error)}})},requestUserImage:function(a,b,c){this.requestUser(function(b,e){if(b&&b.userImage){var f=d(c||CocoonJS.Social.ImageSize.MEDIUM);-1===b.userImage.indexOf("sz=")?b.userImage+="?sz="+f:b.userImage=b.userImage.replace(/sz=\d+/g,"sz="+f)}a(b?b.userImage:null,e)},b)},requestFriends:function(a,b){var d={orderBy:"best"},e=b||"me";this.gapi.client.request({path:this.gapi.plusAPI+"/people/"+e+"/people/visible",params:d,callback:function(b){if(b&&!b.error){for(var d=[],e=0;e<b.items.length;++e)d.push(c(b.items[e]));a(d)}else a([],b?b.error:null)}})},publishMessage:function(a,b){b&&b("Not supported... use publishMessageWithDialog method instead")},publishMessageWithDialog:function(a,b){if(this.gapi.nativeExtensionObjectAvailable){var c={prefilledText:a.message,mediaUrl:a.mediaURL,mediaTitle:a.linkCaption,mediaDescription:a.linkText,url:a.linkURL};CocoonJS.makeNativeExtensionObjectFunctionCall(this.gapi.nativeExtensionName,"shareMessage",[c,b],!0)}else{var d=this,e=function(){var b={contenturl:"https://plus.google.com/pages/",contentdeeplinkid:"/pages",clientid:d.gapi.settings.clientId,cookiepolicy:"single_host_origin",prefilltext:a.message,calltoactionlabel:"CREATE",calltoactionurl:"http://plus.google.com/pages/create",calltoactiondeeplinkid:"/pages/create"};gapi.interactivepost.render("sharePost",b)};if(gapi.interactivepost)e();else{var f=document.createElement("script");f.type="text/javascript",f.async=!0,f.src="https://apis.google.com/js/plusone.js",f.onload=function(){e()},document.getElementsByTagName("head")[0].appendChild(f)}}},requestScore:function(a,b){b=b||{};var c=b.userID||"me",d=b.leaderboardID||this.gapi.settings.defaultLeaderboard;if(!d)throw"leaderboardID not provided in the params. You can also set the default leaderboard in the init method";this.gapi.client.request({path:this.gapi.gamesAPI+"/players/"+c+"/leaderboards/"+d+"/scores/ALL_TIME",callback:function(b){if(b&&b.error)a(null,b.error);else if(b&&b.items&&b.items.length>0){var d=b.items[0],e=new CocoonJS.Social.Score(c,d.scoreValue,"","",d.leaderboard_id);a(e,null)}else a(null,null)}})},submitScore:function(a,b,c){c=c||{};var d=c.leaderboardID||this.gapi.settings.defaultLeaderboard;if(!d)throw"leaderboardID not provided in the params. You can also set the default leaderboard in the init method";this.gapi.client.request({path:this.gapi.gamesAPI+"/leaderboards/"+d+"/scores",method:"POST",params:{score:a},callback:function(a){b&&b(a?a.error:null)}})},showLeaderboard:function(a,b){b=b||{};var c=b.leaderboardID||this.gapi.settings.defaultLeaderboard;if(!c)throw"leaderboardID not provided in the params. You can also set the default leaderboard in the init method";var d=/(iPad|iPhone|iPod)/gi.test(navigator.userAgent);if(!d&&this.gapi.nativeExtensionObjectAvailable){var e=b.timeScope||0;CocoonJS.makeNativeExtensionObjectFunctionCall(this.gapi.nativeExtensionName,"showLeaderboard",[c,e,a],!0)}else{if(!this._leaderboardsTemplate)throw"Please, provide a html template for leaderboards with the setTemplates method";var g=new CocoonJS.App.WebDialog,h=!1;g.show(this._leaderboardsTemplate,function(b){g.closed=!0,!h&&a&&a(b)});var i=b.friends?"SOCIAL":"PUBLIC",j="ALL_TIME";b.timeScope===CocoonJS.Social.TimeScope.WEEK?j="WEEKLY":b.timeScope===CocoonJS.Social.TimeScope.TODAY&&(j="DAILY"),this.gapi.client.request({path:this.gapi.gamesAPI+"/leaderboards/"+c+"/window/"+i,method:"GET",params:{timeSpan:j},callback:function(b){if(!g.closed){if(b.error)return void(a&&(h=!0,a(b.error),g.close()));var d=[],e=[];b&&b.items&&(e=b.items.slice(0)),b&&b.playerScore&&e.push(b.playerScore);for(var i=0;i<e.length;++i){var j=e[i],k=f(j,c);k.imageURL+="?sz=50",k.position=j.scoreRank||i+1,k.me=!1,d.push(k)}var l="addScores("+JSON.stringify(d)+")";g.eval(l)}}})}},prepareAchievements:function(a,b){if(!this._cachedAchievements||a){var c=this;this.gapi.client.request({path:this.gapi.gamesAPI+"/achievements",callback:function(a){if(a&&!a.error){var d=[];if(a&&a.items)for(var f=0;f<a.items.length;f++)d.push(e(a.items[f]));c.setCachedAchievements(d),b(d,null)}else b([],a?a.error:null)}})}else b(this._cachedAchievements,null)},requestAllAchievements:function(a){this.prepareAchievements(!0,a)},requestAchievements:function(a,b){var c=this;this.prepareAchievements(!1,function(d,e){if(e)return void a([],e);var f=b||"me";c.gapi.client.request({path:c.gapi.gamesAPI+"/players/"+f+"/achievements",params:{state:"UNLOCKED"},callback:function(b){if(b&&!b.error){var d=[];if(b.items)for(var e=0;e<b.items.length;e++){var f=c.findAchievement(b.items[e].id);f&&d.push(f)}a(d,null)}else a([],b?b.error:null)}})})},submitAchievement:function(a,b){if(null===a||"undefined"==typeof a)throw"No achievementID specified";var c=this.translateAchievementID(a);if(this.gapi.nativeExtensionObjectAvailable){var d=!!this.gapi.settings.showAchievementNotifications;CocoonJS.makeNativeExtensionObjectFunctionCall(this.gapi.nativeExtensionName,"unlockAchievement",[c,d,b],!0)}else this.gapi.client.request({path:this.gapi.gamesAPI+"/achievements/"+c+"/unlock",method:"POST",callback:function(a){b&&b(a?a.error:null)}})},resetAchievements:function(a){this.gapi.client.request({path:"/games/v1management/achievements/reset",method:"POST",callback:function(b){a&&a(b?b.error:null)}})},showAchievements:function(a){var b=/(iPad|iPhone|iPod)/gi.test(navigator.userAgent);!b&&this.gapi.nativeExtensionObjectAvailable?CocoonJS.makeNativeExtensionObjectFunctionCall(this.gapi.nativeExtensionName,"showAchievements",[a],!0):CocoonJS.Social.SocialGamingServiceGooglePlayGames.superclass.showAchievements.call(this)}},CocoonJS.extend(CocoonJS.Social.SocialGamingServiceGooglePlayGames,CocoonJS.Social.SocialGamingService)}(),function(){if("undefined"==typeof window.CocoonJS||null===window.CocoonJS)throw"The CocoonJS object must exist and be valid before creating any extension object.";if("undefined"==typeof window.CocoonJS.Social||null===window.CocoonJS)throw"The CocoonJS.Social object must exist and be valid before creating a Social Manager extension object.";CocoonJS.Social.ManagerService=function(){this.services=[]},CocoonJS.Social.ManagerService.prototype={services:null,registerSocialService:function(a){this.services.push(a)},submitAchievement:function(a){for(var b=0;b<this.services.length;++b){var c=this.services[b];!c.readOnlyHint&&c.isLoggedIn()&&c.submitAchievement(a,function(a){a&&console.error("Error submitting achievement: "+a.message)})}},submitScore:function(a,b){for(var c=0;c<this.services.length;++c){var d=this.services[c];!d.readOnlyHint&&d.isLoggedIn()&&d.submitScore(a,function(a){a&&console.error("Error submitting score: "+a.message)},b)}},getLoggedInServices:function(){for(var a=[],b=0;b<this.services.length;++b){var c=this.services[b];!c.fakeSocialService&&c.isLoggedIn()&&a.push(c)}return a},isLoggedInAnySocialService:function(){return this.getLoggedInServices().length>0}},CocoonJS.Social.Manager=new CocoonJS.Social.ManagerService}(),function(){function a(a){return 0===a?"connected":1===a?"not_authorized":"unknown"}function b(b,c){var d=null;return 0===b.state&&(d={accessToken:b.accessToken,expirationDate:b.expirationDate,userID:b.user?b.userID:null,permissions:b.permissions,user:b.user}),{status:a(b.state),authResponse:d,error:c}}function c(a){return new CocoonJS.Social.User(a.id,a.username)}function d(a){return{link:a.linkURL,description:a.message,name:a.linkText,caption:a.linkCaption,picture:a.mediaURL}}function e(a,b){var c=new CocoonJS.Social.Score(a.user.id,a.score,a.user.name);return b&&(c.leaderboardID=b.leaderboardID),c.imageURL="https://graph.facebook.com/"+a.user.id+"/picture",c}function f(a){var b=new CocoonJS.Social.Achievement(a.id,a.title,a.description,a.image[0].url,a.data.points);return b.fbAchievementData=a,b}if("undefined"==typeof window.CocoonJS||null===window.CocoonJS)throw"The CocoonJS object must exist and be valid before creating the extension types.";if("undefined"==typeof window.CocoonJS.Social||null===window.CocoonJS.Social)throw"The CocoonJS.Social object must exist and be valid before creating the extension types.";if(CocoonJS.Social.FacebookExtension=function(){this.nativeExtensionName="IDTK_SRV_FACEBOOK",this.extensionName="Social.Facebook",this.nativeExtensionObjectAvailable=CocoonJS.nativeExtensionObjectAvailable&&"undefined"!=typeof window.ext[this.nativeExtensionName],this.Event=new CocoonJS.Social.FacebookEvent(this.nativeExtensionObjectAvailable);var a=this;return this.nativeExtensionObjectAvailable&&(this.onFacebookSessionStateChanged=new CocoonJS.EventHandler(this.nativeExtensionName,this.extensionName,"onFacebookSessionStateChanged"),CocoonJS.Social.Facebook=this,this.onFacebookSessionStateChanged.addEventListener(function(c,d){var e=b(c,d);0==c.state&&a.Event.notify("auth.login",e),a.Event.notify("auth.authResponseChange",e),a.Event.notify("auth.statusChange",e)})),this},CocoonJS.Social.FacebookExtension.prototype={_currentSession:null,_appId:null,_socialService:null,init:function(a){if(!a||!a.appId)throw"appId must be specified!";this._appId=a.appId,this.nativeExtensionObjectAvailable?CocoonJS.makeNativeExtensionObjectFunctionCall(this.nativeExtensionName,"init",[a],!0):FB.init(a);var b=this;this.Event.subscribe("auth.authResponseChange",function(a){b._currentSession=a,a.authResponse&&!a.authResponse.user&&b.api("me?fields=username",function(a){b._currentSession.authResponse.user=a})})},getSocialInterface:function(){if(!this._appId)throw"You must call init() before getting the Social Interface";return this._socialService||(this._socialService=new CocoonJS.Social.SocialGamingServiceFacebook(this)),this._socialService},login:function(a,c){var d=this;this.nativeExtensionObjectAvailable?CocoonJS.makeNativeExtensionObjectFunctionCall(this.nativeExtensionName,"login",[c,function(c,e){d._currentSession=b(c,e),a&&a(d._currentSession)}],!0):FB.login(function(b){d._currentSession=b,a&&a(b)},c)},logout:function(a){this.nativeExtensionObjectAvailable?CocoonJS.makeNativeExtensionObjectFunctionCall(this.nativeExtensionName,"logout",[function(c,d){a&&a(b(c,d))}],!0):FB.logout(function(b){a&&a(b)})},getAuthResponse:function(){if(this.nativeExtensionObjectAvailable){var a=CocoonJS.makeNativeExtensionObjectFunctionCall(this.nativeExtensionName,"getFacebookSession",[]);return b(a)}return FB.getAuthResponse()},getLoginStatus:function(a,c){if(this.nativeExtensionObjectAvailable){var d=this;setTimeout(function(){var c=CocoonJS.makeNativeExtensionObjectFunctionCall(d.nativeExtensionName,"getFacebookSession",[]);a&&a(b(c))},50)}else FB.getLoginStatus(a,c)},api:function(a,b,c,d){if(this.nativeExtensionObjectAvailable){var e=arguments[0],f=arguments.length>3?arguments[1]:"GET",g=null;3==arguments.length&&(g=arguments[1]),4==arguments.length&&(g=arguments[2]);var h=arguments.length>1?arguments[arguments.length-1]:function(){};return CocoonJS.makeNativeExtensionObjectFunctionCall(this.nativeExtensionName,"api",[e,f,g,h],!0)}FB.api(a,b,c,d)},ui:function(a,b){if(this.nativeExtensionObjectAvailable){var a=arguments[0],c=arguments.length>1?arguments[1]:function(){};return CocoonJS.makeNativeExtensionObjectFunctionCall(this.nativeExtensionName,"ui",[a,c],!0)}navigator.isCocoonJS||FB.ui(a,b)},requestAdditionalPermissions:function(a,c,d){if(this.nativeExtensionObjectAvailable){var e=c.split(",");CocoonJS.makeNativeExtensionObjectFunctionCall(this.nativeExtensionName,"requestAdditionalPermissions",[a,e,function(a,c){d&&d(b(a,c))}],!0)}else FB.login(d,{scope:c})},getPermissions:function(a){this.api("me/permissions",function(b){a(b.data&&b.data[0]?b.data[0]:{})})},showShareDialog:function(a,b){this.nativeExtensionObjectAvailable?CocoonJS.makeNativeExtensionObjectFunctionCall(this.nativeExtensionName,"showShareDialog",[a,b],!0):(a.method="feed",FB.ui(a,b))
},uploadPhoto:function(a,b){this.nativeExtensionObjectAvailable?CocoonJS.makeNativeExtensionObjectFunctionCall(this.nativeExtensionName,"uploadPhoto",[a,b],!0):b({error:{message:"Not implemented"}})},showFriendPicker:function(a){this.nativeExtensionObjectAvailable?CocoonJS.makeNativeExtensionObjectFunctionCall(this.nativeExtensionName,"showFriendPicker",[a],!0):a({error:{message:"Not implemented"}})}},CocoonJS.Social.FacebookEvent=function(a){return this.nativeExtensionObjectAvailable=a,this},CocoonJS.Social.FacebookEvent.prototype={subscribe:function(a,b){if(this.nativeExtensionObjectAvailable){var c=a+"listeners";this[c]=this[c]||[],this[c].push(b)}else navigator.isCocoonJS||FB.Event.subscribe(a,b)},unsubscribe:function(a,b){if(this.nativeExtensionObjectAvailable){var c=a+"listeners",d=this[c];if(d){var e=d.indexOf(b);-1!==e&&d.splice(e,1)}}else navigator.isCocoonJS||FB.Event.unsubscribe(a,b)},notify:function(a,b){var c=a+"listeners",d=this[c];if(d)for(var e=0;e<d.length;++e)d[e](b)}},CocoonJS.Social.Facebook=new CocoonJS.Social.FacebookExtension,CocoonJS.Social.SocialGamingServiceFacebook=function(a){CocoonJS.Social.SocialGamingServiceFacebook.superclass.constructor.call(this),this.fb=a;var b=this;return this.fb.Event.subscribe("auth.authResponseChange",function(a){b.onLoginStatusChanged.notifyEventListeners("connected"==a.status,a.error)}),this},CocoonJS.Social.SocialGamingServiceFacebook.prototype={currentPermissions:null,isLoggedIn:function(){return this.fb._currentSession&&"connected"===this.fb._currentSession.status},login:function(a){var b=this;this.fb.login(function(c){a&&a(b.isLoggedIn(),c.error)})},logout:function(a){this.fb.logout(function(b){a&&a(b.error)})},getLoggedInUser:function(){var a=this.fb._currentSession?this.fb._currentSession.authResponse:null;return a&&a.user?c(a.user):a&&a.userID?new CocoonJS.Social.User(a.userID,"Loading..."):null},hasPublishPermissions:function(a){this.fb.getPermissions(function(b,c){a(b.publish_actions,c)})},requestPublishPermissions:function(a){var b=this;this.fb.requestAdditionalPermissions("publish","publish_actions",function(c){c.error?a(!1,error):b.hasPublishPermissions(function(b,c){a(b,c)})})},requestUser:function(a,b){var d=b||"me";this.fb.api(d,function(b){var d=b.error?null:c(b);a(d,b.error)})},requestUserImage:function(a,b,c){!b&&this.isLoggedIn()&&(b=this.fb._currentSession.authResponse.userID);var d="small";c===CocoonJS.Social.ImageSize.THUMB?d="square":c===CocoonJS.Social.ImageSize.MEDIUM?d="normal":c===CocoonJS.Social.ImageSize.LARGE&&(d="large");var e="https://graph.facebook.com/"+b+"/picture?type="+d;a(e)},requestFriends:function(a,b){var d=(b||"me")+"/friends";this.fb.api(d,function(b){var d=[];if(!b.error)for(var e=0;e<b.data.length;e++)d.push(c(b.data[e]));a(d,b.error)})},preparePublishAction:function(a){if(this.currentPermissions)this.currentPermissions.publish_actions?a(!0):(this.currentPermissions=null,this.fb.requestAdditionalPermissions("publish","publish_actions",function(b){a(b.error?!1:!0)}));else{var b=this;this.fb.getPermissions(function(c){b.currentPermissions=c,c&&b.preparePublishAction(a)})}},publishMessage:function(a,b){this.preparePublishAction(function(c){if(c){var e=d(a),f="me/feed";this.fb.api(f,e,function(a){b&&b(a.error)})}else b&&b({message:"No publish_actions permission granted"})})},publishMessageWithDialog:function(a,b){this.fb.showShareDialog(d(a),function(a){b&&b(a.error)})},requestScore:function(a,b){var c=(b&&b.userID?b.userID:"me")+"/scores";this.fb.api(c,function(b){if(b.error)a(null,b.error);else if(b.data&&b.data.length>0){var c=e(b.data[0]);a(c,null)}else a(null,null)})},submitScore:function(a,b,c){var d=this;this.preparePublishAction(function(e){e?d.requestScore(function(e,f){if(f)return void(b&&b(f));var g=e?e.score:0;if(g>=a)return void(b&&b(null));var h="/"+(c&&c.userID?c.userID:"me")+"/scores";d.fb.api(h,"POST",{score:a},function(a){b&&b(a.error)})},c):b&&b({message:"No publish_actions permission granted"})})},showLeaderboard:function(a){if(!this._leaderboardsTemplate)throw"Please, provide a html template for leaderboards with the setTemplates method";var b=new CocoonJS.App.WebDialog,c=!1;b.show(this._leaderboardsTemplate,function(d){b.closed=!0,!c&&a&&a(d)});var d=this;this.fb.api(d.fb._appId+"/scores",function(f){if(!b.closed){if(f.error)return void(a&&(c=!0,a(f.error),b.close()));var g=[];if(f.data&&f.data.length)for(var h=0;h<f.data.length;++h){var i=e(f.data[h]);i.position=h,i.imageURL="https://graph.facebook.com/"+i.userID+"/picture",i.me=i.userID===d.fb._currentSession.authResponse.userID,g.push(i)}var j="addScores("+JSON.stringify(g)+")";b.eval(j)}})},prepareAchievements:function(a,b){if(!this._cachedAchievements||a){var c=this;this.fb.api(this.fb._appId+"/achievements",function(a){if(a.error)b([],a.error);else{var d=[];if(a.data)for(var e=0;e<a.data.length;e++)d.push(f(a.data[e]));c.setCachedAchievements(d),b(d,null)}})}else b(this._cachedAchievements,null)},requestAllAchievements:function(a){this.prepareAchievements(!0,a)},requestAchievements:function(a,b){var c=this;this.prepareAchievements(!1,function(d,e){if(e)return void a([],e);var f=(b||"me")+"/achievements";c.fb.api(f,function(b){if(b.error)a([],b.error);else{var d=[];if(b.data)for(var e=0;e<b.data.length;e++){var f=c.findAchievement((b.data[e].achievement||b.data[e].data.achievement).id);f&&d.push(f)}a(d,null)}})})},submitAchievement:function(a,b){if(null===a||"undefined"==typeof a)throw"No achievementID specified";var c=this.translateAchievementID(a),d=this;this.preparePublishAction(function(a){a?d.fb.api("me/achievements","POST",{achievement:c},function(a){b&&b(a.error)}):b&&b({message:"No publish_actions permission granted"})})},resetAchievements:function(a){var b=this;this.preparePublishAction(function(c){c?b.requestAchievements(function(c,d){if(d)return void(a&&a(d));for(var e=null,f=c.length,g=0;g<c.length;++g)b.fb.api("me/achievements","DELETE",{achievement:c[g].fbAchievementData.url},function(b){b.error&&(e=b.error),f--,0==f&&a&&a(e)})}):a&&a({message:"No publish_actions permission granted"})})},showAchievements:function(a){if(!this._achievementsTemplate)throw"Please, provide a html template for achievements with the setTemplates method";var b=new CocoonJS.App.WebDialog,c=!1;b.show(this._achievementsTemplate,function(d){b.closed=!0,!c&&a&&a(d)});var d=this;this.requestAchievements(function(e,f){if(!b.closed){if(f)return c=!0,void(a&&a(f));var g=[];if(d._cachedAchievements)for(var h=0;h<d._cachedAchievements.length;++h){var i=d._cachedAchievements[h];if(g.push(i),e&&e.length)for(var j=0;j<e.length;++j)if(e[j].achievementID===i.achievementID){i.achieved=!0;break}}var k="addAchievements("+JSON.stringify(g)+");";b.eval(k)}})}},CocoonJS.extend(CocoonJS.Social.SocialGamingServiceFacebook,CocoonJS.Social.SocialGamingService),!navigator.isCocoonJS){var g=document.getElementsByTagName("script")[0],h=document.createElement("script"),i=location.protocol?location.protocol:"http:";h.src=i+"//connect.facebook.net/en_US/all.js",g.parentNode.insertBefore(h,g)}}(),function(){if("undefined"==typeof window.CocoonJS||null===window.CocoonJS)throw"The CocoonJS object must exist and be valid before creating any extension object.";if("undefined"==typeof window.CocoonJS.Social||null===window.CocoonJS)throw"The CocoonJS.Social object must exist and be valid before creating a Social Local Storage extension object.";CocoonJS.Social.LocalStorageService=function(){CocoonJS.Social.LocalStorageService.superclass.constructor.call(this),this.fakeSocialService=!0},CocoonJS.Social.LocalStorageService.prototype={loggedIn:!1,keys:{score:"CocoonJS.Social.LocalStorageService.score",earnedAchievements:"CocoonJS.Social.LocalStorageService.earned"},isLoggedIn:function(){return this.loggedIn},login:function(a){this.loggedIn||this.onLoginStatusChanged.notifyEventListeners(!0),this.loggedIn=!0,a&&setTimeout(function(){a(!0)},0)},logout:function(a){this.loggedIn&&this.onLoginStatusChanged.notifyEventListeners(!0),this.loggedIn=!1,a&&setTimeout(function(){a()},0)},getLoggedInUser:function(){return new CocoonJS.Social.User("me","LocalStorage")},requestUser:function(a,b){var c=new CocoonJS.Social.User(b||"me","LocalStorage");a&&setTimeout(function(){a(c)},0)},requestScore:function(a){var b=localStorage.getItem(this.keys.score),c=parseInt(b)||0;setTimeout(function(){a(new CocoonJS.Social.Score("me",c))},0)},submitScore:function(a,b){var c=localStorage.getItem(this.keys.score),d=parseInt(c)||0;a>d&&localStorage.setItem(this.keys.score,a),b&&setTimeout(function(){b()},0)},getLocalStorageEarnedAchievements:function(){var a=localStorage.getItem(this.keys.earnedAchievements),b=[];if(a){var c=JSON.stringify(a);c&&c.length&&(b=c)}return b},requestAchievements:function(a){var b=this.getLocalStorageEarnedAchievements();setTimeout(function(){a(b)},0)},submitAchievement:function(a,b){if(null===a||"undefined"==typeof a)throw"No achievementID specified";for(var c=this.getLocalStorageEarnedAchievements(),d=!1,e=0;e<c.length;++e)if(c[e]===a){d=!0;break}d||(c.push(a),localStorage.setItem(this.keys.earnedAchievements,JSON.stringify(c))),b&&setTimeout(function(){b()},0)},resetAchievements:function(a){localStorage.removeItem(this.keys.earnedAchievements),a&&setTimeout(function(){a()},0)}},CocoonJS.extend(CocoonJS.Social.LocalStorageService,CocoonJS.Social.SocialGamingService),CocoonJS.Social.LocalStorage=new CocoonJS.Social.LocalStorageService}(),function(){if(!window.CocoonJS)throw"The CocoonJS object must exist and be valid before creating any extension object.";CocoonJS.Multiplayer={},CocoonJS.Multiplayer.MultiplayerService=function(a,b){if("string"!=typeof a)throw"The given native extension name '"+a+"' is not a string.";if("string"!=typeof b)throw"The given extension name '"+a+"' is not a string.";this.nativeExtensionName=a,this.extensionName=b,this.nativeExtensionObjectAvailable=CocoonJS.nativeExtensionObjectAvailable&&"undefined"!=typeof window.ext[a];var c=this;return this.onInvitationReceived=new CocoonJS.EventHandler(this.nativeExtensionName,this.extensionName,"onInvitationReceived"),this.onInvitationLoaded=new CocoonJS.EventHandler(this.nativeExtensionName,this.extensionName,"onInvitationLoaded",function(a,b){var d=b[0],e=b[1];d&&!e?(c.currentMatch=new CocoonJS.Multiplayer.Match(c.nativeExtensionName,c.extensionName,d),a(c.currentMatch,null)):a(null,e)}),this},CocoonJS.Multiplayer.MultiplayerService.prototype={currentMatch:null,findMatch:function(a,b){var c=this;this.nativeExtensionObjectAvailable&&CocoonJS.makeNativeExtensionObjectFunctionCall(this.nativeExtensionName,"findMatch",[a,function(a,d){a&&!d?(c.currentMatch=new CocoonJS.Multiplayer.Match(c.nativeExtensionName,c.extensionName,a),b(c.currentMatch,null)):b(null,d)}],!0)},findAutoMatch:function(a,b){var c=this;this.nativeExtensionObjectAvailable&&CocoonJS.makeNativeExtensionObjectFunctionCall(this.nativeExtensionName,"findAutoMatch",[a,function(a,d){a&&!d?(c.currentMatch=new CocoonJS.Multiplayer.Match(c.nativeExtensionName,c.extensionName,a),b(c.currentMatch,null)):b(null,d)}],!0)},cancelAutoMatch:function(){this.nativeExtensionObjectAvailable&&CocoonJS.makeNativeExtensionObjectFunctionCall(this.nativeExtensionName,"cancelAutoMatch",[],!0)},addPlayersToMatch:function(a,b,c){this.nativeExtensionObjectAvailable&&CocoonJS.makeNativeExtensionObjectFunctionCall(this.nativeExtensionName,"addPlayersToMatch",[a,b.matchID,c],!0)},getMatch:function(){return this.currentMatch}},CocoonJS.Multiplayer.Match=function(a,b,c){if("string"!=typeof a)throw"The given native extension name '"+a+"' is not a string.";if("string"!=typeof b)throw"The given extension name '"+a+"' is not a string.";this.nativeExtensionName=a,this.extensionName=b,this.nativeExtensionObjectAvailable=CocoonJS.nativeExtensionObjectAvailable&&"undefined"!=typeof window.ext[a],this.matchID=c;var d=this;this.onMatchDataReceived=new CocoonJS.EventHandler(this.nativeExtensionName,this.extensionName,"onMatchDataReceived",function(a,b){d.matchID===b[0]&&a(d,b[1],b[2])}),this.onMatchStateChanged=new CocoonJS.EventHandler(this.nativeExtensionName,this.extensionName,"onMatchStateChanged",function(a,b){d.matchID===b[0]&&a(d,b[1],b[2])}),this.onMatchConnectionWithPlayerFailed=new CocoonJS.EventHandler(this.nativeExtensionName,this.extensionName,"onMatchConnectionWithPlayerFailed",function(a,b){d.matchID===b[0]&&a(d,b[1],b[2])}),this.onMatchFailed=new CocoonJS.EventHandler(this.nativeExtensionName,this.extensionName,"onMatchFailed",function(a,b){d.matchID===b[0]&&a(d,b[1])})},CocoonJS.Multiplayer.Match.prototype={start:function(){this.nativeExtensionObjectAvailable&&CocoonJS.makeNativeExtensionObjectFunctionCall(this.nativeExtensionName,"startMatch",[this.matchID],!0)},sendDataToAllPlayers:function(a,b){return this.nativeExtensionObjectAvailable?CocoonJS.makeNativeExtensionObjectFunctionCall(this.nativeExtensionName,"sendDataToAllPlayers",[this.matchID,a,b]):void 0},sendData:function(a,b,c){return this.nativeExtensionObjectAvailable?CocoonJS.makeNativeExtensionObjectFunctionCall(this.nativeExtensionName,"sendData",[this.matchID,a,b,c]):void 0},disconnect:function(){return this.nativeExtensionObjectAvailable?CocoonJS.makeNativeExtensionObjectFunctionCall(this.nativeExtensionName,"disconnect",[this.matchID],!0):void 0},requestPlayersInfo:function(a){return this.nativeExtensionObjectAvailable?CocoonJS.makeNativeExtensionObjectFunctionCall(this.nativeExtensionName,"requestPlayersInfo",[this.matchID,a],!0):void 0},getExpectedPlayerCount:function(){return this.nativeExtensionObjectAvailable?CocoonJS.makeNativeExtensionObjectFunctionCall(this.nativeExtensionName,"getExpectedPlayerCount",[this.matchID]):void 0},getPlayerIDs:function(){return this.nativeExtensionObjectAvailable?CocoonJS.makeNativeExtensionObjectFunctionCall(this.nativeExtensionName,"getPlayerIDs",[this.matchID]):void 0},getLocalPlayerID:function(){return this.nativeExtensionObjectAvailable?CocoonJS.makeNativeExtensionObjectFunctionCall(this.nativeExtensionName,"getLocalPlayerID",[this.matchID]):""}},CocoonJS.Multiplayer.SendDataMode={RELIABLE:0,UNRELIABLE:1},CocoonJS.Multiplayer.ConnectionState={UNKNOWN:0,CONNECTED:1,DISCONNECTED:2},CocoonJS.Multiplayer.PlayerInfo=function(a,b){this.userID=a,this.userName=b},CocoonJS.Multiplayer.MatchRequest=function(a,b,c,d,e){return this.minPlayers=a,this.maxPlayers=b,this.playersToInvite=c,this.playerGroup=d,this.playerAttributes=e,this}}(),function(){if(!window)throw"The CocoonJS object must exist and be valid before creating any extension object.";if(!window.CocoonJS.Multiplayer)throw"The CocoonJS.Multiplayer object must exist and be valid before creating a Game Center extension object.";CocoonJS.Multiplayer.GameCenter=new CocoonJS.Multiplayer.MultiplayerService("IDTK_SRV_MULTIPLAYER_GAMECENTER","Multiplayer.GameCenter")}(),function(){if(!window.CocoonJS)throw"The CocoonJS object must exist and be valid before creating any extension object.";if(!window.CocoonJS.Multiplayer)throw"The CocoonJS.Multiplayer object must exist and be valid before creating a Multiplayer Loopback extension object.";var a=[],b=0,c=[],d=0;CocoonJS.Multiplayer.LoopbackService=function(){CocoonJS.Multiplayer.LoopbackService.superclass.constructor.call(this,"dummy","dummy"),a.push(this),this.playerID=""+b,b++},CocoonJS.Multiplayer.LoopbackService.prototype={findMatch:function(a,b){this.findMatchCallback=b;for(var d=!1,f=0;f<c.length;++f)if(c[f]===this){d=!0;break}if(d||c.push(this),c.length>=a.minPlayers){for(var g=[],f=0;f<c.length;++f)g.push(c[f].getPlayerID());for(var f=0;f<c.length;++f){var h=new e(c[f]);h.playerIDs=g.slice(),c[f].currentMatch=h,c[f].findMatchCallback(h,null)}c=[]}},findAutoMatch:function(a,b){this.findMatch(a,b)},cancelAutoMatch:function(){},addPlayersToMatch:function(a,b,c){c({message:"Not implemmented"})},getPlayerID:function(){return this.playerID},getMatch:function(){return this.currentMatch}},CocoonJS.extend(CocoonJS.Multiplayer.LoopbackService,CocoonJS.Multiplayer.MultiplayerService);var e=function(a){d++,e.superclass.constructor.call(this,"","",d),this.started=!1,this.disconnected=!1,this.pendingData=[],this.service=a};e.prototype={start:function(){var a=this;setTimeout(function(){a.started=!0;for(var b=0;b<a.pendingData.length;++b)a.onMatchDataReceived.notifyEventListeners(a.matchID,a.pendingData[b].data,a.pendingData[b].player)},0)},sendDataToAllPlayers:function(a,b){this.sendData(a,this.playerIDs,b)},sendData:function(b,c){var d=this;setTimeout(function(){for(var e=0;e<a.length;++e){for(var f=null,g=0;g<c.length;++g)c[g]===a[e].getPlayerID()&&(f=a[e]);f&&f.getMatch().notifyDataReceived(b,d.service.getPlayerID())}},0)},disconnect:function(){this.disconnected=!0;for(var b=0;b<this.playerIDs.length;++b)for(var c=this.playerIDs[b],d=0;d<a.length;++d)if(a[d].getPlayerID()===c){var e=a[b].getMatch();e.disconnected||e.onMatchStateChanged.notifyEventListeners(e,this.service.getPlayerID(),CocoonJS.Multiplayer.ConnectionState.DISCONNECTED)}},requestPlayersInfo:function(a){var b=this;setTimeout(function(){for(var c=[],d=0;d<b.playerIDs.length;++d)c[d]={userID:b.playerIDs[d],userName:"Player"+b.playerIDs[d]};a(c)},1)},getExpectedPlayerCount:function(){return 0},getPlayerIDs:function(){return this.playerIDs},getLocalPlayerID:function(){return this.service.playerID},notifyDataReceived:function(a,b){this.started?this.onMatchDataReceived.notifyEventListeners(this.matchID,a,b):this.pendingData.push({data:a,player:b})}},CocoonJS.extend(e,CocoonJS.Multiplayer.Match)}(),function(){if(!window)throw"The CocoonJS object must exist and be valid before creating any extension object.";if(!window.CocoonJS.Multiplayer)throw"The CocoonJS.Multiplayer object must exist and be valid before creating a Google Play Games extension object.";CocoonJS.Multiplayer.GooglePlayGames=new CocoonJS.Multiplayer.MultiplayerService("IDTK_SRV_MULTIPLAYER_GPG","Multiplayer.GooglePlayGames")}(),function(){if("undefined"==typeof window.CocoonJS||null===window.CocoonJS)throw"The CocoonJS object must exist and be valid before creating any extension object.";CocoonJS.Store={},CocoonJS.Store.nativeExtensionObjectAvailable=CocoonJS.nativeExtensionObjectAvailable&&"undefined"!=typeof window.ext.IDTK_SRV_STORE,CocoonJS.Store.ProductInfo=function(a,b,c,d,e,f,g,h){return this.productId=b,this.productAlias=a,this.productType=c,this.title=d,this.description=e,this.price=f,this.localizedPrice=g,this.downloadURL=h,this},CocoonJS.Store.ProductType={CONSUMABLE:0,NON_CONSUMABLE:1,AUTO_RENEWABLE_SUBSCRIPTION:2,FREE_SUBSCRIPTION:3,NON_RENEWABLE_SUBSCRIPTION:4},CocoonJS.Store.StoreType={APP_STORE:0,PLAY_STORE:1,MOCK_STORE:2,CHROME_STORE:3,AMAZON_STORE:4,NOOK_STORE:5},CocoonJS.Store.PurchaseInfo=function(a,b,c,d,e){return this.transactionId=a,this.purchaseTime=b,this.purchaseState=c,this.productId=d,this.quantity=e,this},CocoonJS.Store.PurchaseState={PURCHASED:0,CANCELED:1,REFUNDED:2,EXPIRED:3},CocoonJS.Store.getStoreType=function(){return CocoonJS.Store.nativeExtensionObjectAvailable?CocoonJS.makeNativeExtensionObjectFunctionCall("IDTK_SRV_STORE","getStoreType",arguments):void 0},CocoonJS.Store.requestInitialization=function(a){return"undefined"==typeof a?a={}:(void 0!==a.managed&&(a.remote=a.managed),void 0!==a.sandbox&&(a.debug=a.sandbox)),CocoonJS.Store.nativeExtensionObjectAvailable?CocoonJS.makeNativeExtensionObjectFunctionCall("IDTK_SRV_STORE","requestInitialization",arguments,!0):void 0},CocoonJS.Store.start=function(){return CocoonJS.Store.nativeExtensionObjectAvailable?CocoonJS.makeNativeExtensionObjectFunctionCall("IDTK_SRV_STORE","start",arguments):void 0},CocoonJS.Store.canPurchase=function(){return CocoonJS.Store.nativeExtensionObjectAvailable?CocoonJS.makeNativeExtensionObjectFunctionCall("IDTK_SRV_STORE","canPurchase",arguments):void 0},CocoonJS.Store.fetchProductsFromServer=function(){return CocoonJS.Store.nativeExtensionObjectAvailable?CocoonJS.makeNativeExtensionObjectFunctionCall("IDTK_SRV_STORE","fetchProductsFromServer",arguments,!0):void 0},CocoonJS.Store.fetchProductsFromStore=function(){return CocoonJS.Store.nativeExtensionObjectAvailable?CocoonJS.makeNativeExtensionObjectFunctionCall("IDTK_SRV_STORE","fetchProductsFromStore",arguments,!0):void 0},CocoonJS.Store.finishPurchase=function(){return CocoonJS.Store.nativeExtensionObjectAvailable?CocoonJS.makeNativeExtensionObjectFunctionCall("IDTK_SRV_STORE","finishPurchase",arguments,!0):void 0},CocoonJS.Store.consumePurchase=function(){return CocoonJS.Store.nativeExtensionObjectAvailable?CocoonJS.makeNativeExtensionObjectFunctionCall("IDTK_SRV_STORE","consumePurchase",arguments,!0):void 0},CocoonJS.Store.purchaseProduct=function(){return CocoonJS.Store.nativeExtensionObjectAvailable?CocoonJS.makeNativeExtensionObjectFunctionCall("IDTK_SRV_STORE","purchaseFeature",arguments,!0):void 0},CocoonJS.Store.puchaseProductModal=function(){return CocoonJS.Store.nativeExtensionObjectAvailable?CocoonJS.makeNativeExtensionObjectFunctionCall("IDTK_SRV_STORE","purchaseFeatureModal",arguments,!0):void 0},CocoonJS.Store.purchaseProductModalWithPreview=function(){return CocoonJS.Store.nativeExtensionObjectAvailable?CocoonJS.makeNativeExtensionObjectFunctionCall("IDTK_SRV_STORE","purchaseFeatureModalWithPreview",arguments,!0):void 0},CocoonJS.Store.isProductPurchased=function(){return CocoonJS.Store.nativeExtensionObjectAvailable?CocoonJS.makeNativeExtensionObjectFunctionCall("IDTK_SRV_STORE","isFeaturePurchased",arguments):void 0},CocoonJS.Store.restorePurchases=function(){return CocoonJS.Store.nativeExtensionObjectAvailable?CocoonJS.makeNativeExtensionObjectFunctionCall("IDTK_SRV_STORE","restorePurchases",arguments,!0):void 0},CocoonJS.Store.restorePurchasesModal=function(){return CocoonJS.Store.nativeExtensionObjectAvailable?CocoonJS.makeNativeExtensionObjectFunctionCall("IDTK_SRV_STORE","restorePurchasesModal",arguments,!0):void 0},CocoonJS.Store.getProducts=function(){return CocoonJS.Store.nativeExtensionObjectAvailable?CocoonJS.makeNativeExtensionObjectFunctionCall("IDTK_SRV_STORE","getProducts",arguments):void 0},CocoonJS.Store.addProduct=function(){return CocoonJS.Store.nativeExtensionObjectAvailable?CocoonJS.makeNativeExtensionObjectFunctionCall("IDTK_SRV_STORE","addProduct",arguments):void 0},CocoonJS.Store.removeProduct=function(){return CocoonJS.Store.nativeExtensionObjectAvailable?CocoonJS.makeNativeExtensionObjectFunctionCall("IDTK_SRV_STORE","removeProduct",arguments):void 0},CocoonJS.Store.getPurchases=function(){return CocoonJS.Store.nativeExtensionObjectAvailable?CocoonJS.makeNativeExtensionObjectFunctionCall("IDTK_SRV_STORE","getPurchases",arguments):void 0},CocoonJS.Store.addPurchase=function(){return CocoonJS.Store.nativeExtensionObjectAvailable?CocoonJS.makeNativeExtensionObjectFunctionCall("IDTK_SRV_STORE","addPurchase",arguments):void 0},CocoonJS.Store.removePurchase=function(){return CocoonJS.Store.nativeExtensionObjectAvailable?CocoonJS.makeNativeExtensionObjectFunctionCall("IDTK_SRV_STORE","removePurchase",arguments):void 0},CocoonJS.Store.cancelPurchase=function(){return CocoonJS.Store.nativeExtensionObjectAvailable?CocoonJS.makeNativeExtensionObjectFunctionCall("IDTK_SRV_STORE","cancelPurchase",arguments):void 0},CocoonJS.Store.refundPurchase=function(){return CocoonJS.Store.nativeExtensionObjectAvailable?CocoonJS.makeNativeExtensionObjectFunctionCall("IDTK_SRV_STORE","refundPurchase",arguments):void 0},CocoonJS.Store.expirePurchase=function(){return CocoonJS.Store.nativeExtensionObjectAvailable?CocoonJS.makeNativeExtensionObjectFunctionCall("IDTK_SRV_STORE","expirePurchase",arguments):void 0},CocoonJS.Store.onProductsFetchStarted=new CocoonJS.EventHandler("IDTK_SRV_STORE","Store","onProductsFetchStarted"),CocoonJS.Store.onProductsFetchCompleted=new CocoonJS.EventHandler("IDTK_SRV_STORE","Store","onProductsFetchCompleted"),CocoonJS.Store.onProductsFetchFailed=new CocoonJS.EventHandler("IDTK_SRV_STORE","Store","onProductsFetchFailed"),CocoonJS.Store.onProductPurchaseStarted=new CocoonJS.EventHandler("IDTK_SRV_STORE","Store","onProductPurchaseStarted"),CocoonJS.Store.onProductPurchaseVerificationRequestReceived=new CocoonJS.EventHandler("IDTK_SRV_STORE","Store","onProductPurchaseVerificationRequestReceived"),CocoonJS.Store.onProductPurchaseCompleted=new CocoonJS.EventHandler("IDTK_SRV_STORE","Store","onProductPurchaseCompleted"),CocoonJS.Store.onProductPurchaseFailed=new CocoonJS.EventHandler("IDTK_SRV_STORE","Store","onProductPurchaseFailed"),CocoonJS.Store.onRestorePurchasesStarted=new CocoonJS.EventHandler("IDTK_SRV_STORE","Store","onRestorePurchasesStarted"),CocoonJS.Store.onRestorePurchasesCompleted=new CocoonJS.EventHandler("IDTK_SRV_STORE","Store","onRestorePurchasesCompleted"),CocoonJS.Store.onRestorePurchasesFailed=new CocoonJS.EventHandler("IDTK_SRV_STORE","Store","onRestorePurchasesFailed"),CocoonJS.Store.onConsumePurchaseStarted=new CocoonJS.EventHandler("IDTK_SRV_STORE","Store","onConsumePurchaseStarted"),CocoonJS.Store.onConsumePurchaseCompleted=new CocoonJS.EventHandler("IDTK_SRV_STORE","Store","onConsumePurchaseCompleted"),CocoonJS.Store.onConsumePurchaseFailed=new CocoonJS.EventHandler("IDTK_SRV_STORE","Store","onConsumePurchaseFailed")}(),function(){if("undefined"==typeof window.CocoonJS||null===window.CocoonJS)throw"The CocoonJS object must exist and be valid before creating any extension object.";CocoonJS.Camera={},CocoonJS.Camera.nativeExtensionObjectAvailable=CocoonJS.nativeExtensionObjectAvailable&&"undefined"!=typeof window.ext.IDTK_SRV_CAMERA,CocoonJS.Camera.CameraType={FRONT:"FRONT",BACK:"BACK"},CocoonJS.Camera.CaptureFormatType={JPEG:"JPEG",RGB_565:"RGB_565",NV21:"NV21",NV16:"NV16",YUY2:"YUY2",YV12:"YV12",BGRA32:"32BGRA"},CocoonJS.Camera.CameraInfo={cameraIndex:0,cameraType:CocoonJS.Camera.CameraType.BACK,supportedVideoSizes:[],supportedVideoFrameRates:[],supportedVideoCaptureImageFormats:[]},CocoonJS.Camera.getNumberOfCameras=function(){return CocoonJS.Camera.nativeExtensionObjectAvailable?CocoonJS.makeNativeExtensionObjectFunctionCall("IDTK_SRV_CAMERA","getNumberOfCameras",arguments):void 0},CocoonJS.Camera.getAllCamerasInfo=function(){return CocoonJS.Camera.nativeExtensionObjectAvailable?CocoonJS.makeNativeExtensionObjectFunctionCall("IDTK_SRV_CAMERA","getAllCamerasInfo",arguments):void 0},CocoonJS.Camera.getCameraInfoByIndex=function(){return CocoonJS.Camera.nativeExtensionObjectAvailable?CocoonJS.makeNativeExtensionObjectFunctionCall("IDTK_SRV_CAMERA","getCameraInfoByIndex",arguments):void 0},CocoonJS.Camera.getCameraInfoByType=function(){return CocoonJS.Camera.nativeExtensionObjectAvailable?CocoonJS.makeNativeExtensionObjectFunctionCall("IDTK_SRV_CAMERA","getCameraInfoByType",arguments):void 0},CocoonJS.Camera.startCapturing=function(){return CocoonJS.Camera.nativeExtensionObjectAvailable?CocoonJS.makeNativeExtensionObjectFunctionCall("IDTK_SRV_CAMERA","startCapturing",arguments):void 0},CocoonJS.Camera.stopCapturing=function(){return CocoonJS.Camera.nativeExtensionObjectAvailable?CocoonJS.makeNativeExtensionObjectFunctionCall("IDTK_SRV_CAMERA","stopCapturing",arguments):void 0},CocoonJS.Camera.isCapturing=function(){return CocoonJS.Camera.nativeExtensionObjectAvailable?CocoonJS.makeNativeExtensionObjectFunctionCall("IDTK_SRV_CAMERA","isCapturing",arguments):void 0}}(),function(){if("undefined"==typeof window.CocoonJS||null===window.CocoonJS)throw"The CocoonJS object must exist and be valid before creating any extension object.";CocoonJS.Gamepad={},CocoonJS.Gamepad.nativeExtensionObjectAvailable=CocoonJS.nativeExtensionObjectAvailable&&"undefined"!=typeof window.ext.Gamepad,CocoonJS.Gamepad.Indices={BUTTON_0:0,BUTTON_1:1,BUTTON_2:2,BUTTON_3:3,BUTTON_LEFT_BUMPER:4,BUTTON_RIGHT_BUMPER:5,BUTTON_LEFT_TRIGGER:6,BUTTON_RIGHT_TRIGGER:7,BUTTON_LEFT_JOYSTICK:10,BUTTON_RIGHT_JOYSTICK:11,BUTTON_DPAD_UP:12,BUTTON_DPAD_DOWN:13,BUTTON_DPAD_LEFT:14,BUTTON_DPAD_RIGHT:15,BUTTON_MENU:16,AXIS_LEFT_JOYSTICK_X:0,AXIS_LEFT_JOYSTICK_Y:1,AXIS_RIGHT_JOYSTICK_X:2,AXIS_RIGHT_JOYSTICK_Y:3};var a=navigator.getGamepads||navigator.webkitGetGamepads;a&&(navigator.getGamepads||(console.log("navigator.getGamepads does not exist."),navigator.webkitGetGamepads?(console.log("navigator.webkitGamepads exists, adding navigator.getGamepads to point to it."),navigator.getGamepads=navigator.webkitGetGamepads):console.log("navigator.webkitGetGamepads does not exist either.")))}(),function(){if("undefined"==typeof window.CocoonJS||null===window.CocoonJS)throw"The CocoonJS object must exist and be valid before creating any extension object.";CocoonJS.Notification={},CocoonJS.Notification.nativeExtensionObjectAvailable=CocoonJS.nativeExtensionObjectAvailable&&"undefined"!=typeof window.ext.IDTK_SRV_NOTIFICATION,CocoonJS.Notification.createLocalNotification=function(){return CocoonJS.Notification.nativeExtensionObjectAvailable?CocoonJS.makeNativeExtensionObjectFunctionCall("IDTK_SRV_NOTIFICATION","createLocalNotification",arguments):void 0},CocoonJS.Notification.LocalNotification=function(a,b,c,d,e,f,g){this.id=-1,this.message=a,this.soundEnabled=b,this.badgeNumber=c,this.userData=d,this.contentBody=void 0!==e?e:"",this.contentTitle=void 0!==f?f:"";var h=(new Date).getTime();this.scheduleTime=void 0!==g?g:h},CocoonJS.Notification.PushNotification=function(a,b,c,d,e,f,g){this.message=a,this.soundEnabled=b,this.badgeNumber=c,this.userData=d,this.channels=e,this.expirationTime=void 0!==f?f:0,this.expirationTimeInterval=void 0!==g?g:0},CocoonJS.Notification.start=function(){return CocoonJS.Notification.nativeExtensionObjectAvailable?CocoonJS.makeNativeExtensionObjectFunctionCall("IDTK_SRV_NOTIFICATION","start",arguments):void 0},CocoonJS.Notification.registerForPushNotifications=function(){return CocoonJS.Notification.nativeExtensionObjectAvailable?CocoonJS.makeNativeExtensionObjectFunctionCall("IDTK_SRV_NOTIFICATION","registerForPushNotifications",arguments,!0):void 0},CocoonJS.Notification.unregisterForPushNotifications=function(){return CocoonJS.Notification.nativeExtensionObjectAvailable?CocoonJS.makeNativeExtensionObjectFunctionCall("IDTK_SRV_NOTIFICATION","unregisterForPushNotifications",arguments,!0):void 0},CocoonJS.Notification.cancelLocalNotification=function(){return CocoonJS.Notification.nativeExtensionObjectAvailable?CocoonJS.makeNativeExtensionObjectFunctionCall("IDTK_SRV_NOTIFICATION","cancelLocalNotification",arguments):void 0},CocoonJS.Notification.cancelLastSentLocalNotificiation=function(){return CocoonJS.Notification.nativeExtensionObjectAvailable?CocoonJS.makeNativeExtensionObjectFunctionCall("IDTK_SRV_NOTIFICATION","cancelLocalNotification",arguments,!0):void 0},CocoonJS.Notification.cancelAllLocalNotifications=function(){return CocoonJS.Notification.nativeExtensionObjectAvailable?CocoonJS.makeNativeExtensionObjectFunctionCall("IDTK_SRV_NOTIFICATION","cancelAllLocalNotifications",arguments):void 0},CocoonJS.Notification.sendLocalNotification=function(){return CocoonJS.Notification.nativeExtensionObjectAvailable?CocoonJS.makeNativeExtensionObjectFunctionCall("IDTK_SRV_NOTIFICATION","sendLocalNotification",arguments,!0):void 0},CocoonJS.Notification.subscribeToChannel=function(){return CocoonJS.Notification.nativeExtensionObjectAvailable?CocoonJS.makeNativeExtensionObjectFunctionCall("IDTK_SRV_NOTIFICATION","subscribe",arguments,!0):void 0},CocoonJS.Notification.unsubscribeFromChannel=function(){return CocoonJS.Notification.nativeExtensionObjectAvailable?CocoonJS.makeNativeExtensionObjectFunctionCall("IDTK_SRV_NOTIFICATION","unsubscribe",arguments,!0):void 0},CocoonJS.Notification.sendPushNotification=function(){return CocoonJS.Notification.nativeExtensionObjectAvailable?CocoonJS.makeNativeExtensionObjectFunctionCall("IDTK_SRV_NOTIFICATION","sendPushNotification",arguments,!0):void 0},CocoonJS.Notification.setBadgeNumber=function(){return CocoonJS.Notification.nativeExtensionObjectAvailable?CocoonJS.makeNativeExtensionObjectFunctionCall("IDTK_SRV_NOTIFICATION","setBadgeNumber",arguments):void 0},CocoonJS.Notification.getBadgeNumber=function(){return CocoonJS.Notification.nativeExtensionObjectAvailable?CocoonJS.makeNativeExtensionObjectFunctionCall("IDTK_SRV_NOTIFICATION","getBadgeNumber",arguments):void 0
},CocoonJS.Notification.getLastReceivedLocalNotificationData=function(){return CocoonJS.Notification.nativeExtensionObjectAvailable?CocoonJS.makeNativeExtensionObjectFunctionCall("IDTK_SRV_NOTIFICATION","getLastReceivedLocalNotificationData",arguments):void 0},CocoonJS.Notification.getLastReceivedPushNotificationData=function(){return CocoonJS.Notification.nativeExtensionObjectAvailable?CocoonJS.makeNativeExtensionObjectFunctionCall("IDTK_SRV_NOTIFICATION","getLastReceivedPushNotificationData",arguments):void 0},CocoonJS.Notification.onRegisterForPushNotificationsSucceed=new CocoonJS.EventHandler("IDTK_SRV_NOTIFICATION","Notification","pushNotificationServiceRegistered"),CocoonJS.Notification.onUnregisterForPushNotificationsSucceed=new CocoonJS.EventHandler("IDTK_SRV_NOTIFICATION","Notification","pushNotificationServiceUnregistered"),CocoonJS.Notification.onRegisterForPushNotificationsFailed=new CocoonJS.EventHandler("IDTK_SRV_NOTIFICATION","Notification","pushNotificationServiceFailedToRegister"),CocoonJS.Notification.onPushNotificationReceived=new CocoonJS.EventHandler("IDTK_SRV_NOTIFICATION","Notification","pushNotificationReceived"),CocoonJS.Notification.onLocalNotificationReceived=new CocoonJS.EventHandler("IDTK_SRV_NOTIFICATION","Notification","localNotificationReceived"),CocoonJS.Notification.onPushNotificationDeliverySucceed=new CocoonJS.EventHandler("IDTK_SRV_NOTIFICATION","Notification","pushNotificationSuccessfullyDelivered"),CocoonJS.Notification.onPushNotificationDeliveryFailed=new CocoonJS.EventHandler("IDTK_SRV_NOTIFICATION","Notification","pushNotificationDeliveryError")}();